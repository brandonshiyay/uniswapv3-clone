{"ast":null,"code":"import _slicedToArray from \"/home/brandon/security/learning/defi/uniswapv3-src/uniswapv3-code/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"/home/brandon/security/learning/defi/uniswapv3-src/uniswapv3-code/ui/src/components/AddLiquidityForm.js\";\nimport './LiquidityForm.css';\nimport { ethers } from 'ethers';\nimport { useContext, useEffect, useState } from 'react';\nimport { uint256Max, feeToSpacing } from '../lib/constants';\nimport { MetaMaskContext } from '../contexts/MetaMask';\nimport { TickMath, encodeSqrtRatioX96, nearestUsableTick } from '@uniswap/v3-sdk';\nimport config from \"../config.js\";\nvar slippage = 0.5;\nvar formatAmount = ethers.utils.formatUnits;\nvar priceToSqrtP = function priceToSqrtP(price) {\n  return encodeSqrtRatioX96(price, 1);\n};\nvar priceToTick = function priceToTick(price) {\n  return TickMath.getTickAtSqrtRatio(priceToSqrtP(price));\n};\nvar BackButton = function BackButton(_ref) {\n  var onClick = _ref.onClick;\n  return /*#__PURE__*/React.createElement(\"button\", {\n    className: \"BackButton\",\n    onClick: onClick,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 5\n    }\n  }, \"\\u2190 Back\");\n};\nvar PriceRange = function PriceRange(_ref2) {\n  var lowerPrice = _ref2.lowerPrice,\n    upperPrice = _ref2.upperPrice,\n    setLowerPrice = _ref2.setLowerPrice,\n    setUpperPrice = _ref2.setUpperPrice,\n    disabled = _ref2.disabled;\n  return /*#__PURE__*/React.createElement(\"fieldset\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"upperPrice\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 7\n    }\n  }, \"Price range\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"PriceRangeInputs\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"lowerPrice\",\n    placeholder: \"0.0\",\n    readOnly: disabled,\n    value: lowerPrice,\n    onChange: function onChange(ev) {\n      return setLowerPrice(ev.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 9\n    }\n  }, \"\\xA0\\u2013\\xA0\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"upperPrice\",\n    placeholder: \"0.0\",\n    readOnly: disabled,\n    value: upperPrice,\n    onChange: function onChange(ev) {\n      return setUpperPrice(ev.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }\n  })));\n};\nvar AmountInput = function AmountInput(_ref3) {\n  var amount = _ref3.amount,\n    disabled = _ref3.disabled,\n    setAmount = _ref3.setAmount,\n    token = _ref3.token;\n  return /*#__PURE__*/React.createElement(\"fieldset\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: token.symbol + \"_liquidity\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }, token.symbol, \" amount\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: token + \"_liquidity\",\n    onChange: function onChange(ev) {\n      return setAmount(ev.target.value);\n    },\n    placeholder: \"0.0\",\n    readOnly: disabled,\n    type: \"text\",\n    value: amount,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }));\n};\nvar AddLiquidityForm = function AddLiquidityForm(_ref4) {\n  var toggle = _ref4.toggle,\n    token0Info = _ref4.token0Info,\n    token1Info = _ref4.token1Info,\n    fee = _ref4.fee;\n  var metamaskContext = useContext(MetaMaskContext);\n  var enabled = metamaskContext.status === 'connected';\n  var account = metamaskContext.account;\n  var poolInterface = new ethers.utils.Interface(config.ABIs.Pool);\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    token0 = _useState2[0],\n    setToken0 = _useState2[1];\n  var _useState3 = useState(),\n    _useState4 = _slicedToArray(_useState3, 2),\n    token1 = _useState4[0],\n    setToken1 = _useState4[1];\n  var _useState5 = useState(),\n    _useState6 = _slicedToArray(_useState5, 2),\n    manager = _useState6[0],\n    setManager = _useState6[1];\n  var _useState7 = useState(\"0\"),\n    _useState8 = _slicedToArray(_useState7, 2),\n    amount0 = _useState8[0],\n    setAmount0 = _useState8[1];\n  var _useState9 = useState(\"0\"),\n    _useState10 = _slicedToArray(_useState9, 2),\n    amount1 = _useState10[0],\n    setAmount1 = _useState10[1];\n  var _useState11 = useState(0),\n    _useState12 = _slicedToArray(_useState11, 2),\n    lowerPrice = _useState12[0],\n    setLowerPrice = _useState12[1];\n  var _useState13 = useState(0),\n    _useState14 = _slicedToArray(_useState13, 2),\n    upperPrice = _useState14[0],\n    setUpperPrice = _useState14[1];\n  var _useState15 = useState(false),\n    _useState16 = _slicedToArray(_useState15, 2),\n    loading = _useState16[0],\n    setLoading = _useState16[1];\n  useEffect(function () {\n    setToken0(new ethers.Contract(token0Info.address, config.ABIs.ERC20, new ethers.providers.Web3Provider(window.ethereum).getSigner()));\n    setToken1(new ethers.Contract(token1Info.address, config.ABIs.ERC20, new ethers.providers.Web3Provider(window.ethereum).getSigner()));\n    setManager(new ethers.Contract(config.managerAddress, config.ABIs.Manager, new ethers.providers.Web3Provider(window.ethereum).getSigner()));\n  }, [token0Info, token1Info]);\n\n  /**\n   * Adds liquidity to a pool. Asks user to allow spending of tokens.\n   */\n  var addLiquidity = function addLiquidity(e) {\n    e.preventDefault();\n    if (!token0 || !token1) {\n      return;\n    }\n    setLoading(true);\n    var amount0Desired = ethers.utils.parseEther(amount0);\n    var amount1Desired = ethers.utils.parseEther(amount1);\n    var amount0Min = amount0Desired.mul((100 - slippage) * 100).div(10000);\n    var amount1Min = amount1Desired.mul((100 - slippage) * 100).div(10000);\n    var lowerTick = priceToTick(lowerPrice);\n    var upperTick = priceToTick(upperPrice);\n    var mintParams = {\n      tokenA: token0.address,\n      tokenB: token1.address,\n      fee: fee,\n      lowerTick: nearestUsableTick(lowerTick, feeToSpacing[fee]),\n      upperTick: nearestUsableTick(upperTick, feeToSpacing[fee]),\n      amount0Desired: amount0Desired,\n      amount1Desired: amount1Desired,\n      amount0Min: amount0Min,\n      amount1Min: amount1Min\n    };\n    return Promise.all([token0.allowance(account, config.managerAddress), token1.allowance(account, config.managerAddress)]).then(function (_ref5) {\n      var _ref6 = _slicedToArray(_ref5, 2),\n        allowance0 = _ref6[0],\n        allowance1 = _ref6[1];\n      return Promise.resolve().then(function () {\n        if (allowance0.lt(amount0Desired)) {\n          return token0.approve(config.managerAddress, uint256Max).then(function (tx) {\n            return tx.wait();\n          });\n        }\n      }).then(function () {\n        if (allowance1.lt(amount1Desired)) {\n          return token1.approve(config.managerAddress, uint256Max).then(function (tx) {\n            return tx.wait();\n          });\n        }\n      }).then(function () {\n        return manager.mint(mintParams).then(function (tx) {\n          return tx.wait();\n        });\n      }).then(function () {\n        alert('Liquidity added!');\n      });\n    }).catch(function (err) {\n      if (err.error && err.error.data && err.error.data.data) {\n        var error;\n        try {\n          error = manager.interface.parseError(err.error.data.data);\n        } catch (e) {\n          if (e.message.includes('no matching error')) {\n            error = poolInterface.parseError(err.error.data.data);\n          }\n        }\n        switch (error.name) {\n          case \"SlippageCheckFailed\":\n            alert(\"Slippage check failed (amount0: \".concat(formatAmount(error.args.amount0), \", amount1: \").concat(formatAmount(error.args.amount1), \")\"));\n            return;\n          case \"ZeroLiquidity\":\n            alert('Zero liquidity!');\n            return;\n          default:\n            console.error(error);\n            alert('Unknown error!');\n            return;\n        }\n      }\n      console.error(err);\n      alert('Failed!');\n    }).finally(function () {\n      return setLoading(false);\n    });\n  };\n  return /*#__PURE__*/React.createElement(\"section\", {\n    className: \"LiquidityWrapper\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"LiquidityForm\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(BackButton, {\n    onClick: toggle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(PriceRange, {\n    disabled: !enabled || loading,\n    lowerPrice: lowerPrice,\n    upperPrice: upperPrice,\n    setLowerPrice: setLowerPrice,\n    setUpperPrice: setUpperPrice,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(AmountInput, {\n    amount: amount0,\n    disabled: !enabled || loading,\n    setAmount: setAmount0,\n    token: token0Info,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(AmountInput, {\n    amount: amount1,\n    disabled: !enabled || loading,\n    setAmount: setAmount1,\n    token: token1Info,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"addLiquidity\",\n    disabled: !enabled || loading,\n    onClick: addLiquidity,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 9\n    }\n  }, \"Add liquidity\")));\n};\nexport default AddLiquidityForm;","map":{"version":3,"names":["ethers","useContext","useEffect","useState","uint256Max","feeToSpacing","MetaMaskContext","TickMath","encodeSqrtRatioX96","nearestUsableTick","config","slippage","formatAmount","utils","formatUnits","priceToSqrtP","price","priceToTick","getTickAtSqrtRatio","BackButton","_ref","onClick","React","createElement","className","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","PriceRange","_ref2","lowerPrice","upperPrice","setLowerPrice","setUpperPrice","disabled","htmlFor","type","id","placeholder","readOnly","value","onChange","ev","target","AmountInput","_ref3","amount","setAmount","token","symbol","AddLiquidityForm","_ref4","toggle","token0Info","token1Info","fee","metamaskContext","enabled","status","account","poolInterface","Interface","ABIs","Pool","_useState","_useState2","_slicedToArray","token0","setToken0","_useState3","_useState4","token1","setToken1","_useState5","_useState6","manager","setManager","_useState7","_useState8","amount0","setAmount0","_useState9","_useState10","amount1","setAmount1","_useState11","_useState12","_useState13","_useState14","_useState15","_useState16","loading","setLoading","Contract","address","ERC20","providers","Web3Provider","window","ethereum","getSigner","managerAddress","Manager","addLiquidity","e","preventDefault","amount0Desired","parseEther","amount1Desired","amount0Min","mul","div","amount1Min","lowerTick","upperTick","mintParams","tokenA","tokenB","Promise","all","allowance","then","_ref5","_ref6","allowance0","allowance1","resolve","lt","approve","tx","wait","mint","alert","catch","err","error","data","interface","parseError","message","includes","name","concat","args","console","finally"],"sources":["/home/brandon/security/learning/defi/uniswapv3-src/uniswapv3-code/ui/src/components/AddLiquidityForm.js"],"sourcesContent":["import './LiquidityForm.css';\nimport { ethers } from 'ethers';\nimport { useContext, useEffect, useState } from 'react';\nimport { uint256Max, feeToSpacing } from '../lib/constants';\nimport { MetaMaskContext } from '../contexts/MetaMask';\nimport { TickMath, encodeSqrtRatioX96, nearestUsableTick } from '@uniswap/v3-sdk';\nimport config from \"../config.js\";\n\nconst slippage = 0.5;\n\nconst formatAmount = ethers.utils.formatUnits\n\nconst priceToSqrtP = (price) => encodeSqrtRatioX96(price, 1);\n\nconst priceToTick = (price) => TickMath.getTickAtSqrtRatio(priceToSqrtP(price));\n\nconst BackButton = ({ onClick }) => {\n  return (\n    <button className=\"BackButton\" onClick={onClick}>← Back</button>\n  );\n}\n\nconst PriceRange = ({ lowerPrice, upperPrice, setLowerPrice, setUpperPrice, disabled }) => {\n  return (\n    <fieldset>\n      <label htmlFor=\"upperPrice\">Price range</label>\n      <div className=\"PriceRangeInputs\">\n        <input\n          type=\"text\"\n          id=\"lowerPrice\"\n          placeholder=\"0.0\"\n          readOnly={disabled}\n          value={lowerPrice}\n          onChange={(ev) => setLowerPrice(ev.target.value)}\n        />\n        <span>&nbsp;–&nbsp;</span>\n        <input\n          type=\"text\"\n          id=\"upperPrice\"\n          placeholder=\"0.0\"\n          readOnly={disabled}\n          value={upperPrice}\n          onChange={(ev) => setUpperPrice(ev.target.value)}\n        />\n      </div>\n    </fieldset>\n  );\n}\n\nconst AmountInput = ({ amount, disabled, setAmount, token }) => {\n  return (\n    <fieldset>\n      <label htmlFor={token.symbol + \"_liquidity\"}>{token.symbol} amount</label>\n      <input\n        id={token + \"_liquidity\"}\n        onChange={(ev) => setAmount(ev.target.value)}\n        placeholder=\"0.0\"\n        readOnly={disabled}\n        type=\"text\"\n        value={amount} />\n    </fieldset>\n  );\n}\n\nconst AddLiquidityForm = ({ toggle, token0Info, token1Info, fee }) => {\n  const metamaskContext = useContext(MetaMaskContext);\n  const enabled = metamaskContext.status === 'connected';\n  const account = metamaskContext.account;\n  const poolInterface = new ethers.utils.Interface(config.ABIs.Pool);\n\n  const [token0, setToken0] = useState();\n  const [token1, setToken1] = useState();\n  const [manager, setManager] = useState();\n\n  const [amount0, setAmount0] = useState(\"0\");\n  const [amount1, setAmount1] = useState(\"0\");\n  const [lowerPrice, setLowerPrice] = useState(0);\n  const [upperPrice, setUpperPrice] = useState(0);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    setToken0(new ethers.Contract(\n      token0Info.address,\n      config.ABIs.ERC20,\n      new ethers.providers.Web3Provider(window.ethereum).getSigner()\n    ));\n    setToken1(new ethers.Contract(\n      token1Info.address,\n      config.ABIs.ERC20,\n      new ethers.providers.Web3Provider(window.ethereum).getSigner()\n    ));\n    setManager(new ethers.Contract(\n      config.managerAddress,\n      config.ABIs.Manager,\n      new ethers.providers.Web3Provider(window.ethereum).getSigner()\n    ));\n  }, [token0Info, token1Info]);\n\n  /**\n   * Adds liquidity to a pool. Asks user to allow spending of tokens.\n   */\n  const addLiquidity = (e) => {\n    e.preventDefault();\n\n    if (!token0 || !token1) {\n      return;\n    }\n\n    setLoading(true);\n\n    const amount0Desired = ethers.utils.parseEther(amount0);\n    const amount1Desired = ethers.utils.parseEther(amount1);\n    const amount0Min = amount0Desired.mul((100 - slippage) * 100).div(10000);\n    const amount1Min = amount1Desired.mul((100 - slippage) * 100).div(10000);\n\n    const lowerTick = priceToTick(lowerPrice);\n    const upperTick = priceToTick(upperPrice);\n\n    const mintParams = {\n      tokenA: token0.address,\n      tokenB: token1.address,\n      fee: fee,\n      lowerTick: nearestUsableTick(lowerTick, feeToSpacing[fee]),\n      upperTick: nearestUsableTick(upperTick, feeToSpacing[fee]),\n      amount0Desired, amount1Desired, amount0Min, amount1Min\n    }\n\n    return Promise.all(\n      [\n        token0.allowance(account, config.managerAddress),\n        token1.allowance(account, config.managerAddress)\n      ]\n    ).then(([allowance0, allowance1]) => {\n      return Promise.resolve()\n        .then(() => {\n          if (allowance0.lt(amount0Desired)) {\n            return token0.approve(config.managerAddress, uint256Max).then(tx => tx.wait())\n          }\n        })\n        .then(() => {\n          if (allowance1.lt(amount1Desired)) {\n            return token1.approve(config.managerAddress, uint256Max).then(tx => tx.wait())\n          }\n        })\n        .then(() => {\n          return manager.mint(mintParams)\n            .then(tx => tx.wait())\n        })\n        .then(() => {\n          alert('Liquidity added!');\n        });\n    }).catch((err) => {\n      if (err.error && err.error.data && err.error.data.data) {\n        let error;\n\n        try {\n          error = manager.interface.parseError(err.error.data.data);\n        } catch (e) {\n          if (e.message.includes('no matching error')) {\n            error = poolInterface.parseError(err.error.data.data);\n          }\n        }\n\n        switch (error.name) {\n          case \"SlippageCheckFailed\":\n            alert(`Slippage check failed (amount0: ${formatAmount(error.args.amount0)}, amount1: ${formatAmount(error.args.amount1)})`)\n            return;\n\n          case \"ZeroLiquidity\":\n            alert('Zero liquidity!');\n            return;\n\n          default:\n            console.error(error);\n            alert('Unknown error!');\n\n            return;\n        }\n      }\n\n      console.error(err);\n      alert('Failed!');\n    }).finally(() => setLoading(false));\n  }\n\n  return (\n    <section className=\"LiquidityWrapper\">\n      <form className=\"LiquidityForm\">\n        <BackButton\n          onClick={toggle} />\n        <PriceRange\n          disabled={!enabled || loading}\n          lowerPrice={lowerPrice}\n          upperPrice={upperPrice}\n          setLowerPrice={setLowerPrice}\n          setUpperPrice={setUpperPrice} />\n        <AmountInput\n          amount={amount0}\n          disabled={!enabled || loading}\n          setAmount={setAmount0}\n          token={token0Info} />\n        <AmountInput\n          amount={amount1}\n          disabled={!enabled || loading}\n          setAmount={setAmount1}\n          token={token1Info} />\n        <button className=\"addLiquidity\" disabled={!enabled || loading} onClick={addLiquidity}>Add liquidity</button>\n      </form>\n    </section>\n  );\n};\n\nexport default AddLiquidityForm;"],"mappings":"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"},"metadata":{},"sourceType":"module"}