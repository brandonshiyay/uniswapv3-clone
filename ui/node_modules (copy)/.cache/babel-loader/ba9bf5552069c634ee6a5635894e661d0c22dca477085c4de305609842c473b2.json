{"ast":null,"code":"var _jsxFileName = \"/home/brandon/security/learning/defi/uniswapv3-src/uniswapv3-code/ui/src/components/RemoveLiquidityForm.js\",\n  _s = $RefreshSig$();\nimport './LiquidityForm.css';\nimport { ethers } from 'ethers';\nimport { useContext, useEffect, useState } from 'react';\nimport { feeToSpacing } from '../lib/constants';\nimport { MetaMaskContext } from '../contexts/MetaMask';\nimport { TickMath, encodeSqrtRatioX96, nearestUsableTick } from '@uniswap/v3-sdk';\nimport debounce from '../lib/debounce';\nimport config from \"../config.js\";\nimport computePoolAddress from '../lib/computePoolAddress';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst priceToSqrtP = price => encodeSqrtRatioX96(price, 1);\nconst priceToTick = price => TickMath.getTickAtSqrtRatio(priceToSqrtP(price));\nconst BackButton = _ref => {\n  let {\n    onClick\n  } = _ref;\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    className: \"BackButton\",\n    onClick: onClick,\n    children: \"\\u2190 Back\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 16,\n    columnNumber: 5\n  }, this);\n};\n_c = BackButton;\nconst PriceRange = _ref2 => {\n  let {\n    lowerPrice,\n    upperPrice,\n    setLowerPrice,\n    setUpperPrice,\n    disabled\n  } = _ref2;\n  return /*#__PURE__*/_jsxDEV(\"fieldset\", {\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"upperPrice\",\n      children: \"Price range\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"PriceRangeInputs\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"lowerPrice\",\n        placeholder: \"0.0\",\n        readOnly: disabled,\n        value: lowerPrice,\n        onChange: ev => setLowerPrice(ev.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\xA0\\u2013\\xA0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"upperPrice\",\n        placeholder: \"0.0\",\n        readOnly: disabled,\n        value: upperPrice,\n        onChange: ev => setUpperPrice(ev.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 22,\n    columnNumber: 5\n  }, this);\n};\n_c2 = PriceRange;\nconst RemoveLiquidityForm = _ref3 => {\n  _s();\n  let {\n    toggle,\n    token0Info,\n    token1Info,\n    fee\n  } = _ref3;\n  const metamaskContext = useContext(MetaMaskContext);\n  const enabled = metamaskContext.status === 'connected';\n  const account = metamaskContext.account;\n  const [token0, setToken0] = useState();\n  const [token1, setToken1] = useState();\n  const [manager, setManager] = useState();\n  const [pool, setPool] = useState();\n  const [lowerPrice, setLowerPrice] = useState(\"0\");\n  const [upperPrice, setUpperPrice] = useState(\"0\");\n  const [availableAmount, setAvailableAmount] = useState(\"0\");\n  const [amount, setAmount] = useState(\"0\");\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    setToken0(new ethers.Contract(token0Info.address, config.ABIs.ERC20, new ethers.providers.Web3Provider(window.ethereum).getSigner()));\n    setToken1(new ethers.Contract(token1Info.address, config.ABIs.ERC20, new ethers.providers.Web3Provider(window.ethereum).getSigner()));\n    setManager(new ethers.Contract(config.managerAddress, config.ABIs.Manager, new ethers.providers.Web3Provider(window.ethereum).getSigner()));\n    setPool(new ethers.Contract(computePoolAddress(config.factoryAddress, token0Info.address, token1Info.address, fee), config.ABIs.Pool, new ethers.providers.Web3Provider(window.ethereum).getSigner()));\n  }, [token0Info, token1Info, fee]);\n  const removeLiquidity = e => {\n    e.preventDefault();\n    if (!token0 || !token1) {\n      return;\n    }\n    setLoading(true);\n    const lowerTick = nearestUsableTick(priceToTick(lowerPrice), feeToSpacing[fee]);\n    const upperTick = nearestUsableTick(priceToTick(upperPrice), feeToSpacing[fee]);\n    pool.burn(lowerTick, upperTick, amount).then(tx => tx.wait()).then(receipt => {\n      if (!receipt.events[0] || receipt.events[0].event !== \"Burn\") {\n        throw Error(\"Missing Burn event after burning!\");\n      }\n      const amount0Burned = receipt.events[0].args.amount0;\n      const amount1Burned = receipt.events[0].args.amount1;\n      return pool.collect(account, lowerTick, upperTick, amount0Burned, amount1Burned);\n    }).then(tx => tx.wait()).then(() => toggle()).catch(err => console.error(err));\n  };\n\n  /**\n   * Fetches available liquidity from a position.\n   */\n  const getAvailableLiquidity = debounce((amount, isLower) => {\n    const lowerTick = priceToTick(isLower ? amount : lowerPrice);\n    const upperTick = priceToTick(isLower ? upperPrice : amount);\n    const params = {\n      tokenA: token0.address,\n      tokenB: token1.address,\n      fee: fee,\n      owner: account,\n      lowerTick: nearestUsableTick(lowerTick, feeToSpacing[fee]),\n      upperTick: nearestUsableTick(upperTick, feeToSpacing[fee])\n    };\n    manager.getPosition(params).then(position => setAvailableAmount(position.liquidity.toString())).catch(err => console.error(err));\n  }, 500);\n  const setPriceFn = (setPriceFn, isLower) => {\n    return amount => {\n      setPriceFn(amount);\n      getAvailableLiquidity(amount, isLower);\n    };\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"LiquidityWrapper\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"LiquidityForm\",\n      children: [/*#__PURE__*/_jsxDEV(BackButton, {\n        onClick: toggle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PriceRange, {\n        disabled: !enabled || loading,\n        lowerPrice: lowerPrice,\n        upperPrice: upperPrice,\n        setLowerPrice: setPriceFn(setLowerPrice, true),\n        setUpperPrice: setPriceFn(setUpperPrice, false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Available liquidity\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: availableAmount\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Amount to remove\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          value: amount,\n          onChange: ev => setAmount(ev.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"removeLiquidity\",\n        disabled: !enabled || loading,\n        onClick: removeLiquidity,\n        children: \"Remove liquidity\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 143,\n    columnNumber: 5\n  }, this);\n};\n_s(RemoveLiquidityForm, \"8qLGisfhfsLN2lz/vO21owAiuY0=\");\n_c3 = RemoveLiquidityForm;\nexport default RemoveLiquidityForm;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"BackButton\");\n$RefreshReg$(_c2, \"PriceRange\");\n$RefreshReg$(_c3, \"RemoveLiquidityForm\");","map":{"version":3,"names":["ethers","useContext","useEffect","useState","feeToSpacing","MetaMaskContext","TickMath","encodeSqrtRatioX96","nearestUsableTick","debounce","config","computePoolAddress","jsxDEV","_jsxDEV","priceToSqrtP","price","priceToTick","getTickAtSqrtRatio","BackButton","_ref","onClick","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","PriceRange","_ref2","lowerPrice","upperPrice","setLowerPrice","setUpperPrice","disabled","htmlFor","type","id","placeholder","readOnly","value","onChange","ev","target","_c2","RemoveLiquidityForm","_ref3","_s","toggle","token0Info","token1Info","fee","metamaskContext","enabled","status","account","token0","setToken0","token1","setToken1","manager","setManager","pool","setPool","availableAmount","setAvailableAmount","amount","setAmount","loading","setLoading","Contract","address","ABIs","ERC20","providers","Web3Provider","window","ethereum","getSigner","managerAddress","Manager","factoryAddress","Pool","removeLiquidity","e","preventDefault","lowerTick","upperTick","burn","then","tx","wait","receipt","events","event","Error","amount0Burned","args","amount0","amount1Burned","amount1","collect","catch","err","console","error","getAvailableLiquidity","isLower","params","tokenA","tokenB","owner","getPosition","position","liquidity","toString","setPriceFn","_c3","$RefreshReg$"],"sources":["/home/brandon/security/learning/defi/uniswapv3-src/uniswapv3-code/ui/src/components/RemoveLiquidityForm.js"],"sourcesContent":["import './LiquidityForm.css';\nimport { ethers } from 'ethers';\nimport { useContext, useEffect, useState } from 'react';\nimport { feeToSpacing } from '../lib/constants';\nimport { MetaMaskContext } from '../contexts/MetaMask';\nimport { TickMath, encodeSqrtRatioX96, nearestUsableTick } from '@uniswap/v3-sdk';\nimport debounce from '../lib/debounce';\nimport config from \"../config.js\";\nimport computePoolAddress from '../lib/computePoolAddress';\n\nconst priceToSqrtP = (price) => encodeSqrtRatioX96(price, 1);\nconst priceToTick = (price) => TickMath.getTickAtSqrtRatio(priceToSqrtP(price));\n\nconst BackButton = ({ onClick }) => {\n  return (\n    <button className=\"BackButton\" onClick={onClick}>← Back</button>\n  );\n}\n\nconst PriceRange = ({ lowerPrice, upperPrice, setLowerPrice, setUpperPrice, disabled }) => {\n  return (\n    <fieldset>\n      <label htmlFor=\"upperPrice\">Price range</label>\n      <div className=\"PriceRangeInputs\">\n        <input\n          type=\"text\"\n          id=\"lowerPrice\"\n          placeholder=\"0.0\"\n          readOnly={disabled}\n          value={lowerPrice}\n          onChange={(ev) => setLowerPrice(ev.target.value)}\n        />\n        <span>&nbsp;–&nbsp;</span>\n        <input\n          type=\"text\"\n          id=\"upperPrice\"\n          placeholder=\"0.0\"\n          readOnly={disabled}\n          value={upperPrice}\n          onChange={(ev) => setUpperPrice(ev.target.value)}\n        />\n      </div>\n    </fieldset>\n  );\n}\n\nconst RemoveLiquidityForm = ({ toggle, token0Info, token1Info, fee }) => {\n  const metamaskContext = useContext(MetaMaskContext);\n  const enabled = metamaskContext.status === 'connected';\n  const account = metamaskContext.account;\n\n  const [token0, setToken0] = useState();\n  const [token1, setToken1] = useState();\n  const [manager, setManager] = useState();\n  const [pool, setPool] = useState();\n  const [lowerPrice, setLowerPrice] = useState(\"0\");\n  const [upperPrice, setUpperPrice] = useState(\"0\");\n  const [availableAmount, setAvailableAmount] = useState(\"0\");\n  const [amount, setAmount] = useState(\"0\");\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    setToken0(new ethers.Contract(\n      token0Info.address,\n      config.ABIs.ERC20,\n      new ethers.providers.Web3Provider(window.ethereum).getSigner()\n    ));\n    setToken1(new ethers.Contract(\n      token1Info.address,\n      config.ABIs.ERC20,\n      new ethers.providers.Web3Provider(window.ethereum).getSigner()\n    ));\n    setManager(new ethers.Contract(\n      config.managerAddress,\n      config.ABIs.Manager,\n      new ethers.providers.Web3Provider(window.ethereum).getSigner()\n    ));\n    setPool(new ethers.Contract(\n      computePoolAddress(config.factoryAddress, token0Info.address, token1Info.address, fee),\n      config.ABIs.Pool,\n      new ethers.providers.Web3Provider(window.ethereum).getSigner()\n    ));\n  }, [token0Info, token1Info, fee]);\n\n  const removeLiquidity = (e) => {\n    e.preventDefault();\n\n    if (!token0 || !token1) {\n      return;\n    }\n\n    setLoading(true);\n\n    const lowerTick = nearestUsableTick(priceToTick(lowerPrice), feeToSpacing[fee]);\n    const upperTick = nearestUsableTick(priceToTick(upperPrice), feeToSpacing[fee]);\n\n    pool.burn(lowerTick, upperTick, amount)\n      .then(tx => tx.wait())\n      .then(receipt => {\n        if (!receipt.events[0] || receipt.events[0].event !== \"Burn\") {\n          throw Error(\"Missing Burn event after burning!\");\n        }\n\n        const amount0Burned = receipt.events[0].args.amount0;\n        const amount1Burned = receipt.events[0].args.amount1;\n\n        return pool.collect(account, lowerTick, upperTick, amount0Burned, amount1Burned)\n      })\n      .then(tx => tx.wait())\n      .then(() => toggle())\n      .catch(err => console.error(err));\n  }\n\n  /**\n   * Fetches available liquidity from a position.\n   */\n  const getAvailableLiquidity = debounce((amount, isLower) => {\n    const lowerTick = priceToTick(isLower ? amount : lowerPrice);\n    const upperTick = priceToTick(isLower ? upperPrice : amount);\n\n    const params = {\n      tokenA: token0.address,\n      tokenB: token1.address,\n      fee: fee,\n      owner: account,\n      lowerTick: nearestUsableTick(lowerTick, feeToSpacing[fee]),\n      upperTick: nearestUsableTick(upperTick, feeToSpacing[fee]),\n    }\n\n    manager.getPosition(params)\n      .then(position => setAvailableAmount(position.liquidity.toString()))\n      .catch(err => console.error(err));\n  }, 500);\n\n  const setPriceFn = (setPriceFn, isLower) => {\n    return (amount) => {\n      setPriceFn(amount);\n      getAvailableLiquidity(amount, isLower);\n    }\n  };\n\n  return (\n    <section className=\"LiquidityWrapper\">\n      <form className=\"LiquidityForm\">\n        <BackButton\n          onClick={toggle} />\n        <PriceRange\n          disabled={!enabled || loading}\n          lowerPrice={lowerPrice}\n          upperPrice={upperPrice}\n          setLowerPrice={setPriceFn(setLowerPrice, true)}\n          setUpperPrice={setPriceFn(setUpperPrice, false)} />\n        <fieldset>\n          <label>Available liquidity</label>\n          <label>{availableAmount}</label>\n        </fieldset>\n        <fieldset>\n          <label>Amount to remove</label>\n          <input type=\"number\"\n            value={amount}\n            onChange={ev => setAmount(ev.target.value)}\n          />\n        </fieldset>\n        <button className=\"removeLiquidity\" disabled={!enabled || loading} onClick={removeLiquidity}>Remove liquidity</button>\n      </form>\n    </section>\n  );\n}\n\nexport default RemoveLiquidityForm;"],"mappings":";;AAAA,OAAO,qBAAqB;AAC5B,SAASA,MAAM,QAAQ,QAAQ;AAC/B,SAASC,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AACvD,SAASC,YAAY,QAAQ,kBAAkB;AAC/C,SAASC,eAAe,QAAQ,sBAAsB;AACtD,SAASC,QAAQ,EAAEC,kBAAkB,EAAEC,iBAAiB,QAAQ,iBAAiB;AACjF,OAAOC,QAAQ,MAAM,iBAAiB;AACtC,OAAOC,MAAM,MAAM,cAAc;AACjC,OAAOC,kBAAkB,MAAM,2BAA2B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE3D,MAAMC,YAAY,GAAIC,KAAK,IAAKR,kBAAkB,CAACQ,KAAK,EAAE,CAAC,CAAC;AAC5D,MAAMC,WAAW,GAAID,KAAK,IAAKT,QAAQ,CAACW,kBAAkB,CAACH,YAAY,CAACC,KAAK,CAAC,CAAC;AAE/E,MAAMG,UAAU,GAAGC,IAAA,IAAiB;EAAA,IAAhB;IAAEC;EAAQ,CAAC,GAAAD,IAAA;EAC7B,oBACEN,OAAA;IAAQQ,SAAS,EAAC,YAAY;IAACD,OAAO,EAAEA,OAAQ;IAAAE,QAAA,EAAC;EAAM;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QAAS;AAEpE,CAAC;AAAAC,EAAA,GAJKT,UAAU;AAMhB,MAAMU,UAAU,GAAGC,KAAA,IAAwE;EAAA,IAAvE;IAAEC,UAAU;IAAEC,UAAU;IAAEC,aAAa;IAAEC,aAAa;IAAEC;EAAS,CAAC,GAAAL,KAAA;EACpF,oBACEhB,OAAA;IAAAS,QAAA,gBACET,OAAA;MAAOsB,OAAO,EAAC,YAAY;MAAAb,QAAA,EAAC;IAAW;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAQ,eAC/Cb,OAAA;MAAKQ,SAAS,EAAC,kBAAkB;MAAAC,QAAA,gBAC/BT,OAAA;QACEuB,IAAI,EAAC,MAAM;QACXC,EAAE,EAAC,YAAY;QACfC,WAAW,EAAC,KAAK;QACjBC,QAAQ,EAAEL,QAAS;QACnBM,KAAK,EAAEV,UAAW;QAClBW,QAAQ,EAAGC,EAAE,IAAKV,aAAa,CAACU,EAAE,CAACC,MAAM,CAACH,KAAK;MAAE;QAAAjB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QACjD,eACFb,OAAA;QAAAS,QAAA,EAAM;MAAa;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAO,eAC1Bb,OAAA;QACEuB,IAAI,EAAC,MAAM;QACXC,EAAE,EAAC,YAAY;QACfC,WAAW,EAAC,KAAK;QACjBC,QAAQ,EAAEL,QAAS;QACnBM,KAAK,EAAET,UAAW;QAClBU,QAAQ,EAAGC,EAAE,IAAKT,aAAa,CAACS,EAAE,CAACC,MAAM,CAACH,KAAK;MAAE;QAAAjB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QACjD;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QACE;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QACG;AAEf,CAAC;AAAAkB,GAAA,GAzBKhB,UAAU;AA2BhB,MAAMiB,mBAAmB,GAAGC,KAAA,IAA6C;EAAAC,EAAA;EAAA,IAA5C;IAAEC,MAAM;IAAEC,UAAU;IAAEC,UAAU;IAAEC;EAAI,CAAC,GAAAL,KAAA;EAClE,MAAMM,eAAe,GAAGnD,UAAU,CAACI,eAAe,CAAC;EACnD,MAAMgD,OAAO,GAAGD,eAAe,CAACE,MAAM,KAAK,WAAW;EACtD,MAAMC,OAAO,GAAGH,eAAe,CAACG,OAAO;EAEvC,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGtD,QAAQ,EAAE;EACtC,MAAM,CAACuD,MAAM,EAAEC,SAAS,CAAC,GAAGxD,QAAQ,EAAE;EACtC,MAAM,CAACyD,OAAO,EAAEC,UAAU,CAAC,GAAG1D,QAAQ,EAAE;EACxC,MAAM,CAAC2D,IAAI,EAAEC,OAAO,CAAC,GAAG5D,QAAQ,EAAE;EAClC,MAAM,CAAC2B,UAAU,EAAEE,aAAa,CAAC,GAAG7B,QAAQ,CAAC,GAAG,CAAC;EACjD,MAAM,CAAC4B,UAAU,EAAEE,aAAa,CAAC,GAAG9B,QAAQ,CAAC,GAAG,CAAC;EACjD,MAAM,CAAC6D,eAAe,EAAEC,kBAAkB,CAAC,GAAG9D,QAAQ,CAAC,GAAG,CAAC;EAC3D,MAAM,CAAC+D,MAAM,EAAEC,SAAS,CAAC,GAAGhE,QAAQ,CAAC,GAAG,CAAC;EACzC,MAAM,CAACiE,OAAO,EAAEC,UAAU,CAAC,GAAGlE,QAAQ,CAAC,KAAK,CAAC;EAE7CD,SAAS,CAAC,MAAM;IACduD,SAAS,CAAC,IAAIzD,MAAM,CAACsE,QAAQ,CAC3BrB,UAAU,CAACsB,OAAO,EAClB7D,MAAM,CAAC8D,IAAI,CAACC,KAAK,EACjB,IAAIzE,MAAM,CAAC0E,SAAS,CAACC,YAAY,CAACC,MAAM,CAACC,QAAQ,CAAC,CAACC,SAAS,EAAE,CAC/D,CAAC;IACFnB,SAAS,CAAC,IAAI3D,MAAM,CAACsE,QAAQ,CAC3BpB,UAAU,CAACqB,OAAO,EAClB7D,MAAM,CAAC8D,IAAI,CAACC,KAAK,EACjB,IAAIzE,MAAM,CAAC0E,SAAS,CAACC,YAAY,CAACC,MAAM,CAACC,QAAQ,CAAC,CAACC,SAAS,EAAE,CAC/D,CAAC;IACFjB,UAAU,CAAC,IAAI7D,MAAM,CAACsE,QAAQ,CAC5B5D,MAAM,CAACqE,cAAc,EACrBrE,MAAM,CAAC8D,IAAI,CAACQ,OAAO,EACnB,IAAIhF,MAAM,CAAC0E,SAAS,CAACC,YAAY,CAACC,MAAM,CAACC,QAAQ,CAAC,CAACC,SAAS,EAAE,CAC/D,CAAC;IACFf,OAAO,CAAC,IAAI/D,MAAM,CAACsE,QAAQ,CACzB3D,kBAAkB,CAACD,MAAM,CAACuE,cAAc,EAAEhC,UAAU,CAACsB,OAAO,EAAErB,UAAU,CAACqB,OAAO,EAAEpB,GAAG,CAAC,EACtFzC,MAAM,CAAC8D,IAAI,CAACU,IAAI,EAChB,IAAIlF,MAAM,CAAC0E,SAAS,CAACC,YAAY,CAACC,MAAM,CAACC,QAAQ,CAAC,CAACC,SAAS,EAAE,CAC/D,CAAC;EACJ,CAAC,EAAE,CAAC7B,UAAU,EAAEC,UAAU,EAAEC,GAAG,CAAC,CAAC;EAEjC,MAAMgC,eAAe,GAAIC,CAAC,IAAK;IAC7BA,CAAC,CAACC,cAAc,EAAE;IAElB,IAAI,CAAC7B,MAAM,IAAI,CAACE,MAAM,EAAE;MACtB;IACF;IAEAW,UAAU,CAAC,IAAI,CAAC;IAEhB,MAAMiB,SAAS,GAAG9E,iBAAiB,CAACQ,WAAW,CAACc,UAAU,CAAC,EAAE1B,YAAY,CAAC+C,GAAG,CAAC,CAAC;IAC/E,MAAMoC,SAAS,GAAG/E,iBAAiB,CAACQ,WAAW,CAACe,UAAU,CAAC,EAAE3B,YAAY,CAAC+C,GAAG,CAAC,CAAC;IAE/EW,IAAI,CAAC0B,IAAI,CAACF,SAAS,EAAEC,SAAS,EAAErB,MAAM,CAAC,CACpCuB,IAAI,CAACC,EAAE,IAAIA,EAAE,CAACC,IAAI,EAAE,CAAC,CACrBF,IAAI,CAACG,OAAO,IAAI;MACf,IAAI,CAACA,OAAO,CAACC,MAAM,CAAC,CAAC,CAAC,IAAID,OAAO,CAACC,MAAM,CAAC,CAAC,CAAC,CAACC,KAAK,KAAK,MAAM,EAAE;QAC5D,MAAMC,KAAK,CAAC,mCAAmC,CAAC;MAClD;MAEA,MAAMC,aAAa,GAAGJ,OAAO,CAACC,MAAM,CAAC,CAAC,CAAC,CAACI,IAAI,CAACC,OAAO;MACpD,MAAMC,aAAa,GAAGP,OAAO,CAACC,MAAM,CAAC,CAAC,CAAC,CAACI,IAAI,CAACG,OAAO;MAEpD,OAAOtC,IAAI,CAACuC,OAAO,CAAC9C,OAAO,EAAE+B,SAAS,EAAEC,SAAS,EAAES,aAAa,EAAEG,aAAa,CAAC;IAClF,CAAC,CAAC,CACDV,IAAI,CAACC,EAAE,IAAIA,EAAE,CAACC,IAAI,EAAE,CAAC,CACrBF,IAAI,CAAC,MAAMzC,MAAM,EAAE,CAAC,CACpBsD,KAAK,CAACC,GAAG,IAAIC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC,CAAC;EACrC,CAAC;;EAED;AACF;AACA;EACE,MAAMG,qBAAqB,GAAGjG,QAAQ,CAAC,CAACyD,MAAM,EAAEyC,OAAO,KAAK;IAC1D,MAAMrB,SAAS,GAAGtE,WAAW,CAAC2F,OAAO,GAAGzC,MAAM,GAAGpC,UAAU,CAAC;IAC5D,MAAMyD,SAAS,GAAGvE,WAAW,CAAC2F,OAAO,GAAG5E,UAAU,GAAGmC,MAAM,CAAC;IAE5D,MAAM0C,MAAM,GAAG;MACbC,MAAM,EAAErD,MAAM,CAACe,OAAO;MACtBuC,MAAM,EAAEpD,MAAM,CAACa,OAAO;MACtBpB,GAAG,EAAEA,GAAG;MACR4D,KAAK,EAAExD,OAAO;MACd+B,SAAS,EAAE9E,iBAAiB,CAAC8E,SAAS,EAAElF,YAAY,CAAC+C,GAAG,CAAC,CAAC;MAC1DoC,SAAS,EAAE/E,iBAAiB,CAAC+E,SAAS,EAAEnF,YAAY,CAAC+C,GAAG,CAAC;IAC3D,CAAC;IAEDS,OAAO,CAACoD,WAAW,CAACJ,MAAM,CAAC,CACxBnB,IAAI,CAACwB,QAAQ,IAAIhD,kBAAkB,CAACgD,QAAQ,CAACC,SAAS,CAACC,QAAQ,EAAE,CAAC,CAAC,CACnEb,KAAK,CAACC,GAAG,IAAIC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC,CAAC;EACrC,CAAC,EAAE,GAAG,CAAC;EAEP,MAAMa,UAAU,GAAGA,CAACA,UAAU,EAAET,OAAO,KAAK;IAC1C,OAAQzC,MAAM,IAAK;MACjBkD,UAAU,CAAClD,MAAM,CAAC;MAClBwC,qBAAqB,CAACxC,MAAM,EAAEyC,OAAO,CAAC;IACxC,CAAC;EACH,CAAC;EAED,oBACE9F,OAAA;IAASQ,SAAS,EAAC,kBAAkB;IAAAC,QAAA,eACnCT,OAAA;MAAMQ,SAAS,EAAC,eAAe;MAAAC,QAAA,gBAC7BT,OAAA,CAACK,UAAU;QACTE,OAAO,EAAE4B;MAAO;QAAAzB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAG,eACrBb,OAAA,CAACe,UAAU;QACTM,QAAQ,EAAE,CAACmB,OAAO,IAAIe,OAAQ;QAC9BtC,UAAU,EAAEA,UAAW;QACvBC,UAAU,EAAEA,UAAW;QACvBC,aAAa,EAAEoF,UAAU,CAACpF,aAAa,EAAE,IAAI,CAAE;QAC/CC,aAAa,EAAEmF,UAAU,CAACnF,aAAa,EAAE,KAAK;MAAE;QAAAV,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAG,eACrDb,OAAA;QAAAS,QAAA,gBACET,OAAA;UAAAS,QAAA,EAAO;QAAmB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QAAQ,eAClCb,OAAA;UAAAS,QAAA,EAAQ0C;QAAe;UAAAzC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QAAS;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QACvB,eACXb,OAAA;QAAAS,QAAA,gBACET,OAAA;UAAAS,QAAA,EAAO;QAAgB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QAAQ,eAC/Bb,OAAA;UAAOuB,IAAI,EAAC,QAAQ;UAClBI,KAAK,EAAE0B,MAAO;UACdzB,QAAQ,EAAEC,EAAE,IAAIyB,SAAS,CAACzB,EAAE,CAACC,MAAM,CAACH,KAAK;QAAE;UAAAjB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,QAC3C;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QACO,eACXb,OAAA;QAAQQ,SAAS,EAAC,iBAAiB;QAACa,QAAQ,EAAE,CAACmB,OAAO,IAAIe,OAAQ;QAAChD,OAAO,EAAE+D,eAAgB;QAAA7D,QAAA,EAAC;MAAgB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAAS;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EACjH;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QACC;AAEd,CAAC;AAAAqB,EAAA,CAzHKF,mBAAmB;AAAAwE,GAAA,GAAnBxE,mBAAmB;AA2HzB,eAAeA,mBAAmB;AAAC,IAAAlB,EAAA,EAAAiB,GAAA,EAAAyE,GAAA;AAAAC,YAAA,CAAA3F,EAAA;AAAA2F,YAAA,CAAA1E,GAAA;AAAA0E,YAAA,CAAAD,GAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}