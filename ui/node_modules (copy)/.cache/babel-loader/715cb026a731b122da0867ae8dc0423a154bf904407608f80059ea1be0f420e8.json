{"ast":null,"code":"var _jsxFileName = \"/home/brandon/security/learning/defi/uniswapv3-src/uniswapv3-code/ui/src/components/AddLiquidityForm.js\",\n  _s = $RefreshSig$();\nimport './LiquidityForm.css';\nimport { ethers } from 'ethers';\nimport { useContext, useEffect, useState } from 'react';\nimport { uint256Max, feeToSpacing } from '../lib/constants';\nimport { MetaMaskContext } from '../contexts/MetaMask';\nimport { TickMath, encodeSqrtRatioX96, nearestUsableTick } from '@uniswap/v3-sdk';\nimport config from \"../config.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst slippage = 0.5;\nconst formatAmount = ethers.utils.formatUnits;\nconst priceToSqrtP = price => encodeSqrtRatioX96(price, 1);\nconst priceToTick = price => TickMath.getTickAtSqrtRatio(priceToSqrtP(price));\nconst BackButton = _ref => {\n  let {\n    onClick\n  } = _ref;\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    className: \"BackButton\",\n    onClick: onClick,\n    children: \"\\u2190 Back\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 19,\n    columnNumber: 5\n  }, this);\n};\n_c = BackButton;\nconst PriceRange = _ref2 => {\n  let {\n    lowerPrice,\n    upperPrice,\n    setLowerPrice,\n    setUpperPrice,\n    disabled\n  } = _ref2;\n  return /*#__PURE__*/_jsxDEV(\"fieldset\", {\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"upperPrice\",\n      children: \"Price range\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"PriceRangeInputs\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"lowerPrice\",\n        placeholder: \"0.0\",\n        readOnly: disabled,\n        value: lowerPrice,\n        onChange: ev => setLowerPrice(ev.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\xA0\\u2013\\xA0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"upperPrice\",\n        placeholder: \"0.0\",\n        readOnly: disabled,\n        value: upperPrice,\n        onChange: ev => setUpperPrice(ev.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 5\n  }, this);\n};\n_c2 = PriceRange;\nconst AmountInput = _ref3 => {\n  let {\n    amount,\n    disabled,\n    setAmount,\n    token\n  } = _ref3;\n  return /*#__PURE__*/_jsxDEV(\"fieldset\", {\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: token.symbol + \"_liquidity\",\n      children: [token.symbol, \" amount\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      id: token + \"_liquidity\",\n      onChange: ev => setAmount(ev.target.value),\n      placeholder: \"0.0\",\n      readOnly: disabled,\n      type: \"text\",\n      value: amount\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n};\n_c3 = AmountInput;\nconst AddLiquidityForm = _ref4 => {\n  _s();\n  let {\n    toggle,\n    token0Info,\n    token1Info,\n    fee\n  } = _ref4;\n  const metamaskContext = useContext(MetaMaskContext);\n  const enabled = metamaskContext.status === 'connected';\n  const account = metamaskContext.account;\n  const poolInterface = new ethers.utils.Interface(config.ABIs.Pool);\n  const [token0, setToken0] = useState();\n  const [token1, setToken1] = useState();\n  const [manager, setManager] = useState();\n  const [amount0, setAmount0] = useState(\"0\");\n  const [amount1, setAmount1] = useState(\"0\");\n  const [lowerPrice, setLowerPrice] = useState(0);\n  const [upperPrice, setUpperPrice] = useState(0);\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    setToken0(new ethers.Contract(token0Info.address, config.ABIs.ERC20, new ethers.providers.Web3Provider(window.ethereum).getSigner()));\n    setToken1(new ethers.Contract(token1Info.address, config.ABIs.ERC20, new ethers.providers.Web3Provider(window.ethereum).getSigner()));\n    setManager(new ethers.Contract(config.managerAddress, config.ABIs.Manager, new ethers.providers.Web3Provider(window.ethereum).getSigner()));\n  }, [token0Info, token1Info]);\n\n  /**\n   * Adds liquidity to a pool. Asks user to allow spending of tokens.\n   */\n  const addLiquidity = e => {\n    e.preventDefault();\n    if (!token0 || !token1) {\n      return;\n    }\n    setLoading(true);\n    const amount0Desired = ethers.utils.parseEther(amount0);\n    const amount1Desired = ethers.utils.parseEther(amount1);\n    const amount0Min = amount0Desired.mul((100 - slippage) * 100).div(10000);\n    const amount1Min = amount1Desired.mul((100 - slippage) * 100).div(10000);\n    const lowerTick = priceToTick(lowerPrice);\n    const upperTick = priceToTick(upperPrice);\n    const mintParams = {\n      tokenA: token0.address,\n      tokenB: token1.address,\n      fee: fee,\n      lowerTick: nearestUsableTick(lowerTick, feeToSpacing[fee]),\n      upperTick: nearestUsableTick(upperTick, feeToSpacing[fee]),\n      amount0Desired,\n      amount1Desired,\n      amount0Min,\n      amount1Min\n    };\n    return Promise.all([token0.allowance(account, config.managerAddress), token1.allowance(account, config.managerAddress)]).then(_ref5 => {\n      let [allowance0, allowance1] = _ref5;\n      return Promise.resolve().then(() => {\n        if (allowance0.lt(amount0Desired)) {\n          return token0.approve(config.managerAddress, uint256Max).then(tx => tx.wait());\n        }\n      }).then(() => {\n        if (allowance1.lt(amount1Desired)) {\n          return token1.approve(config.managerAddress, uint256Max).then(tx => tx.wait());\n        }\n      }).then(() => {\n        return manager.mint(mintParams).then(tx => tx.wait());\n      }).then(() => {\n        alert('Liquidity added!');\n      });\n    }).catch(err => {\n      if (err.error && err.error.data && err.error.data.data) {\n        let error;\n        try {\n          error = manager.interface.parseError(err.error.data.data);\n        } catch (e) {\n          if (e.message.includes('no matching error')) {\n            error = poolInterface.parseError(err.error.data.data);\n          }\n        }\n        switch (error.name) {\n          case \"SlippageCheckFailed\":\n            alert(`Slippage check failed (amount0: ${formatAmount(error.args.amount0)}, amount1: ${formatAmount(error.args.amount1)})`);\n            return;\n          case \"ZeroLiquidity\":\n            alert('Zero liquidity!');\n            return;\n          default:\n            console.error(error);\n            alert('Unknown error!');\n            return;\n        }\n      }\n      console.error(err);\n      alert('Failed!');\n    }).finally(() => setLoading(false));\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"LiquidityWrapper\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"LiquidityForm\",\n      children: [/*#__PURE__*/_jsxDEV(BackButton, {\n        onClick: toggle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PriceRange, {\n        disabled: !enabled || loading,\n        lowerPrice: lowerPrice,\n        upperPrice: upperPrice,\n        setLowerPrice: setLowerPrice,\n        setUpperPrice: setUpperPrice\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AmountInput, {\n        amount: amount0,\n        disabled: !enabled || loading,\n        setAmount: setAmount0,\n        token: token0Info\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AmountInput, {\n        amount: amount1,\n        disabled: !enabled || loading,\n        setAmount: setAmount1,\n        token: token1Info\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"addLiquidity\",\n        disabled: !enabled || loading,\n        onClick: addLiquidity,\n        children: \"Add liquidity\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 187,\n    columnNumber: 5\n  }, this);\n};\n_s(AddLiquidityForm, \"yqyAyvqI2TQB5q5jORHuSAERjrE=\");\n_c4 = AddLiquidityForm;\nexport default AddLiquidityForm;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"BackButton\");\n$RefreshReg$(_c2, \"PriceRange\");\n$RefreshReg$(_c3, \"AmountInput\");\n$RefreshReg$(_c4, \"AddLiquidityForm\");","map":{"version":3,"names":["ethers","useContext","useEffect","useState","uint256Max","feeToSpacing","MetaMaskContext","TickMath","encodeSqrtRatioX96","nearestUsableTick","config","jsxDEV","_jsxDEV","slippage","formatAmount","utils","formatUnits","priceToSqrtP","price","priceToTick","getTickAtSqrtRatio","BackButton","_ref","onClick","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","PriceRange","_ref2","lowerPrice","upperPrice","setLowerPrice","setUpperPrice","disabled","htmlFor","type","id","placeholder","readOnly","value","onChange","ev","target","_c2","AmountInput","_ref3","amount","setAmount","token","symbol","_c3","AddLiquidityForm","_ref4","_s","toggle","token0Info","token1Info","fee","metamaskContext","enabled","status","account","poolInterface","Interface","ABIs","Pool","token0","setToken0","token1","setToken1","manager","setManager","amount0","setAmount0","amount1","setAmount1","loading","setLoading","Contract","address","ERC20","providers","Web3Provider","window","ethereum","getSigner","managerAddress","Manager","addLiquidity","e","preventDefault","amount0Desired","parseEther","amount1Desired","amount0Min","mul","div","amount1Min","lowerTick","upperTick","mintParams","tokenA","tokenB","Promise","all","allowance","then","_ref5","allowance0","allowance1","resolve","lt","approve","tx","wait","mint","alert","catch","err","error","data","interface","parseError","message","includes","name","args","console","finally","_c4","$RefreshReg$"],"sources":["/home/brandon/security/learning/defi/uniswapv3-src/uniswapv3-code/ui/src/components/AddLiquidityForm.js"],"sourcesContent":["import './LiquidityForm.css';\nimport { ethers } from 'ethers';\nimport { useContext, useEffect, useState } from 'react';\nimport { uint256Max, feeToSpacing } from '../lib/constants';\nimport { MetaMaskContext } from '../contexts/MetaMask';\nimport { TickMath, encodeSqrtRatioX96, nearestUsableTick } from '@uniswap/v3-sdk';\nimport config from \"../config.js\";\n\nconst slippage = 0.5;\n\nconst formatAmount = ethers.utils.formatUnits\n\nconst priceToSqrtP = (price) => encodeSqrtRatioX96(price, 1);\n\nconst priceToTick = (price) => TickMath.getTickAtSqrtRatio(priceToSqrtP(price));\n\nconst BackButton = ({ onClick }) => {\n  return (\n    <button className=\"BackButton\" onClick={onClick}>← Back</button>\n  );\n}\n\nconst PriceRange = ({ lowerPrice, upperPrice, setLowerPrice, setUpperPrice, disabled }) => {\n  return (\n    <fieldset>\n      <label htmlFor=\"upperPrice\">Price range</label>\n      <div className=\"PriceRangeInputs\">\n        <input\n          type=\"text\"\n          id=\"lowerPrice\"\n          placeholder=\"0.0\"\n          readOnly={disabled}\n          value={lowerPrice}\n          onChange={(ev) => setLowerPrice(ev.target.value)}\n        />\n        <span>&nbsp;–&nbsp;</span>\n        <input\n          type=\"text\"\n          id=\"upperPrice\"\n          placeholder=\"0.0\"\n          readOnly={disabled}\n          value={upperPrice}\n          onChange={(ev) => setUpperPrice(ev.target.value)}\n        />\n      </div>\n    </fieldset>\n  );\n}\n\nconst AmountInput = ({ amount, disabled, setAmount, token }) => {\n  return (\n    <fieldset>\n      <label htmlFor={token.symbol + \"_liquidity\"}>{token.symbol} amount</label>\n      <input\n        id={token + \"_liquidity\"}\n        onChange={(ev) => setAmount(ev.target.value)}\n        placeholder=\"0.0\"\n        readOnly={disabled}\n        type=\"text\"\n        value={amount} />\n    </fieldset>\n  );\n}\n\nconst AddLiquidityForm = ({ toggle, token0Info, token1Info, fee }) => {\n  const metamaskContext = useContext(MetaMaskContext);\n  const enabled = metamaskContext.status === 'connected';\n  const account = metamaskContext.account;\n  const poolInterface = new ethers.utils.Interface(config.ABIs.Pool);\n\n  const [token0, setToken0] = useState();\n  const [token1, setToken1] = useState();\n  const [manager, setManager] = useState();\n\n  const [amount0, setAmount0] = useState(\"0\");\n  const [amount1, setAmount1] = useState(\"0\");\n  const [lowerPrice, setLowerPrice] = useState(0);\n  const [upperPrice, setUpperPrice] = useState(0);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    setToken0(new ethers.Contract(\n      token0Info.address,\n      config.ABIs.ERC20,\n      new ethers.providers.Web3Provider(window.ethereum).getSigner()\n    ));\n    setToken1(new ethers.Contract(\n      token1Info.address,\n      config.ABIs.ERC20,\n      new ethers.providers.Web3Provider(window.ethereum).getSigner()\n    ));\n    setManager(new ethers.Contract(\n      config.managerAddress,\n      config.ABIs.Manager,\n      new ethers.providers.Web3Provider(window.ethereum).getSigner()\n    ));\n  }, [token0Info, token1Info]);\n\n  /**\n   * Adds liquidity to a pool. Asks user to allow spending of tokens.\n   */\n  const addLiquidity = (e) => {\n    e.preventDefault();\n\n    if (!token0 || !token1) {\n      return;\n    }\n\n    setLoading(true);\n\n    const amount0Desired = ethers.utils.parseEther(amount0);\n    const amount1Desired = ethers.utils.parseEther(amount1);\n    const amount0Min = amount0Desired.mul((100 - slippage) * 100).div(10000);\n    const amount1Min = amount1Desired.mul((100 - slippage) * 100).div(10000);\n\n    const lowerTick = priceToTick(lowerPrice);\n    const upperTick = priceToTick(upperPrice);\n\n    const mintParams = {\n      tokenA: token0.address,\n      tokenB: token1.address,\n      fee: fee,\n      lowerTick: nearestUsableTick(lowerTick, feeToSpacing[fee]),\n      upperTick: nearestUsableTick(upperTick, feeToSpacing[fee]),\n      amount0Desired, amount1Desired, amount0Min, amount1Min\n    }\n\n    return Promise.all(\n      [\n        token0.allowance(account, config.managerAddress),\n        token1.allowance(account, config.managerAddress)\n      ]\n    ).then(([allowance0, allowance1]) => {\n      return Promise.resolve()\n        .then(() => {\n          if (allowance0.lt(amount0Desired)) {\n            return token0.approve(config.managerAddress, uint256Max).then(tx => tx.wait())\n          }\n        })\n        .then(() => {\n          if (allowance1.lt(amount1Desired)) {\n            return token1.approve(config.managerAddress, uint256Max).then(tx => tx.wait())\n          }\n        })\n        .then(() => {\n          return manager.mint(mintParams)\n            .then(tx => tx.wait())\n        })\n        .then(() => {\n          alert('Liquidity added!');\n        });\n    }).catch((err) => {\n      if (err.error && err.error.data && err.error.data.data) {\n        let error;\n\n        try {\n          error = manager.interface.parseError(err.error.data.data);\n        } catch (e) {\n          if (e.message.includes('no matching error')) {\n            error = poolInterface.parseError(err.error.data.data);\n          }\n        }\n\n        switch (error.name) {\n          case \"SlippageCheckFailed\":\n            alert(`Slippage check failed (amount0: ${formatAmount(error.args.amount0)}, amount1: ${formatAmount(error.args.amount1)})`)\n            return;\n\n          case \"ZeroLiquidity\":\n            alert('Zero liquidity!');\n            return;\n\n          default:\n            console.error(error);\n            alert('Unknown error!');\n\n            return;\n        }\n      }\n\n      console.error(err);\n      alert('Failed!');\n    }).finally(() => setLoading(false));\n  }\n\n  return (\n    <section className=\"LiquidityWrapper\">\n      <form className=\"LiquidityForm\">\n        <BackButton\n          onClick={toggle} />\n        <PriceRange\n          disabled={!enabled || loading}\n          lowerPrice={lowerPrice}\n          upperPrice={upperPrice}\n          setLowerPrice={setLowerPrice}\n          setUpperPrice={setUpperPrice} />\n        <AmountInput\n          amount={amount0}\n          disabled={!enabled || loading}\n          setAmount={setAmount0}\n          token={token0Info} />\n        <AmountInput\n          amount={amount1}\n          disabled={!enabled || loading}\n          setAmount={setAmount1}\n          token={token1Info} />\n        <button className=\"addLiquidity\" disabled={!enabled || loading} onClick={addLiquidity}>Add liquidity</button>\n      </form>\n    </section>\n  );\n};\n\nexport default AddLiquidityForm;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}