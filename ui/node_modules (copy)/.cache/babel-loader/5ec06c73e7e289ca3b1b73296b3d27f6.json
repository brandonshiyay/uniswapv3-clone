{"ast":null,"code":"import _slicedToArray from \"/home/brandon/security/learning/defi/uniswapv3-src/uniswapv3-code/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"/home/brandon/security/learning/defi/uniswapv3-src/uniswapv3-code/ui/src/components/EventsFeed.js\";\nimport { ethers } from \"ethers\";\nimport { useContext, useEffect, useReducer } from \"react\";\nimport { MetaMaskContext } from \"../contexts/MetaMask\";\nvar PoolABI = require('../abi/Pool.json');\nvar getEvents = function getEvents(pool) {\n  return Promise.all([pool.queryFilter(\"Burn\", \"earliest\", \"latest\"), pool.queryFilter(\"Collect\", \"earliest\", \"latest\"), pool.queryFilter(\"Mint\", \"earliest\", \"latest\"), pool.queryFilter(\"Swap\", \"earliest\", \"latest\")]).then(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n      mints = _ref2[0],\n      swaps = _ref2[1];\n    return Promise.resolve((mints || []).concat(swaps || []));\n  });\n};\nvar subscribeToEvents = function subscribeToEvents(pool, callback) {\n  pool.on(\"Burn\", function (a, b, c, d, e, f, g, event) {\n    return callback(event);\n  });\n  pool.on(\"Collect\", function (a, b, c, d, e, f, g, event) {\n    return callback(event);\n  });\n  pool.on(\"Mint\", function (a, b, c, d, e, f, g, event) {\n    return callback(event);\n  });\n  pool.on(\"Swap\", function (a, b, c, d, e, f, g, event) {\n    return callback(event);\n  });\n};\nvar renderAmount = function renderAmount(amount) {\n  return ethers.utils.formatUnits(amount);\n};\nvar renderBurn = function renderBurn(args) {\n  return /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }\n  }, \"Burn\"), \"[amount0: \", renderAmount(args.amount0), \", amount1: \", renderAmount(args.amount1), \", amount: \", renderAmount(args.amount), \"]\");\n};\nvar renderCollect = function renderCollect(args) {\n  return /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }\n  }, \"Collect\"), \"[amount0: \", renderAmount(args.amount0), \", amount1: \", renderAmount(args.amount1), \"]\");\n};\nvar renderMint = function renderMint(args) {\n  return /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, \"Mint\"), \"[range: [\", args.tickLower, \"-\", args.tickUpper, \"], amounts: [\", renderAmount(args.amount0), \", \", renderAmount(args.amount1), \"]]\");\n};\nvar renderSwap = function renderSwap(args) {\n  return /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }, \"Swap\"), \"[amount0: \", renderAmount(args.amount0), \", amount1: \", renderAmount(args.amount1), \"]\");\n};\nvar renderEvent = function renderEvent(event, i) {\n  var content;\n  switch (event.event) {\n    case 'Burn':\n      content = renderBurn(event.args);\n      break;\n    case 'Collect':\n      content = renderCollect(event.args);\n      break;\n    case 'Mint':\n      content = renderMint(event.args);\n      break;\n    case 'Swap':\n      content = renderSwap(event.args);\n      break;\n    default:\n      return;\n  }\n  return /*#__PURE__*/React.createElement(\"tr\", {\n    key: i,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"pr-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }, event.pairID), /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }, content));\n};\nvar isSupportedEvent = function isSupportedEvent(event) {\n  return event.event === \"Mint\" || event.event === 'Swap' || event.event === 'Burn' || event.event === 'Collect';\n};\nvar cleanEvents = function cleanEvents(events) {\n  var eventsMap = events.reduce(function (acc, event) {\n    acc[\"\".concat(event.address, \"_\").concat(event.transactionHash)] = event;\n    return acc;\n  }, {});\n  return Object.keys(eventsMap).map(function (k) {\n    return eventsMap[k];\n  }).sort(function (a, b) {\n    return b.blockNumber - a.blockNumber || b.logIndex - a.logIndex;\n  });\n};\nvar eventsReducer = function eventsReducer(state, action) {\n  switch (action.type) {\n    case 'add':\n      return cleanEvents(state.concat(action.value));\n    default:\n      return;\n  }\n};\nvar EventsList = function EventsList(_ref3) {\n  var events = _ref3.events;\n  return /*#__PURE__*/React.createElement(\"table\", {\n    className: \"py-6 mb-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }\n  }, events.filter(isSupportedEvent).map(renderEvent)));\n};\nvar pairID = function pairID(pair) {\n  return \"\".concat(pair.token0.symbol, \"/\").concat(pair.token1.symbol);\n};\nvar addPairIDToEvents = function addPairIDToEvents(events, pair) {\n  return events.filter(function (ev) {\n    return ev;\n  }).map(function (ev) {\n    ev.pairID = pairID(pair);\n    return ev;\n  });\n};\nvar EventsFeed = function EventsFeed(_ref4) {\n  var pairs = _ref4.pairs;\n  var metamaskContext = useContext(MetaMaskContext);\n  var _useReducer = useReducer(eventsReducer, []),\n    _useReducer2 = _slicedToArray(_useReducer, 2),\n    events = _useReducer2[0],\n    setEvents = _useReducer2[1];\n  useEffect(function () {\n    if (metamaskContext.status !== 'connected') {\n      return;\n    }\n    var pairContracts = pairs.map(function (pair) {\n      var contract = new ethers.Contract(pair.address, PoolABI, new ethers.providers.Web3Provider(window.ethereum));\n      subscribeToEvents(contract, function (event) {\n        return setEvents({\n          type: 'add',\n          value: addPairIDToEvents([event], pair)\n        });\n      });\n      getEvents(contract).then(function (events) {\n        return setEvents({\n          type: 'add',\n          value: addPairIDToEvents(events, pair)\n        });\n      });\n      return contract;\n    });\n    return function () {\n      pairContracts.forEach(function (pair) {\n        return pair.removeAllListeners();\n      });\n    };\n  }, [metamaskContext.status, setEvents, pairs]);\n  return /*#__PURE__*/React.createElement(EventsList, {\n    events: events,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 11\n    }\n  });\n};\nexport default EventsFeed;","map":{"version":3,"names":["ethers","useContext","useEffect","useReducer","MetaMaskContext","PoolABI","require","getEvents","pool","Promise","all","queryFilter","then","_ref","_ref2","_slicedToArray","mints","swaps","resolve","concat","subscribeToEvents","callback","on","a","b","c","d","e","f","g","event","renderAmount","amount","utils","formatUnits","renderBurn","args","React","createElement","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","amount0","amount1","renderCollect","renderMint","tickLower","tickUpper","renderSwap","renderEvent","i","content","key","className","pairID","isSupportedEvent","cleanEvents","events","eventsMap","reduce","acc","address","transactionHash","Object","keys","map","k","sort","blockNumber","logIndex","eventsReducer","state","action","type","value","EventsList","_ref3","filter","pair","token0","symbol","token1","addPairIDToEvents","ev","EventsFeed","_ref4","pairs","metamaskContext","_useReducer","_useReducer2","setEvents","status","pairContracts","contract","Contract","providers","Web3Provider","window","ethereum","forEach","removeAllListeners"],"sources":["/home/brandon/security/learning/defi/uniswapv3-src/uniswapv3-code/ui/src/components/EventsFeed.js"],"sourcesContent":["import { ethers } from \"ethers\";\nimport { useContext, useEffect, useReducer } from \"react\";\nimport { MetaMaskContext } from \"../contexts/MetaMask\";\n\nconst PoolABI = require('../abi/Pool.json');\n\nconst getEvents = (pool) => {\n  return Promise.all([\n    pool.queryFilter(\"Burn\", \"earliest\", \"latest\"),\n    pool.queryFilter(\"Collect\", \"earliest\", \"latest\"),\n    pool.queryFilter(\"Mint\", \"earliest\", \"latest\"),\n    pool.queryFilter(\"Swap\", \"earliest\", \"latest\"),\n  ]).then(([mints, swaps]) => {\n    return Promise.resolve((mints || []).concat(swaps || []))\n  })\n}\n\nconst subscribeToEvents = (pool, callback) => {\n  pool.on(\"Burn\", (a, b, c, d, e, f, g, event) => callback(event));\n  pool.on(\"Collect\", (a, b, c, d, e, f, g, event) => callback(event));\n  pool.on(\"Mint\", (a, b, c, d, e, f, g, event) => callback(event));\n  pool.on(\"Swap\", (a, b, c, d, e, f, g, event) => callback(event));\n}\n\nconst renderAmount = (amount) => {\n  return ethers.utils.formatUnits(amount);\n}\n\nconst renderBurn = (args) => {\n  return (\n    <span>\n      <strong>Burn</strong>\n      [amount0: {renderAmount(args.amount0)}, amount1: {renderAmount(args.amount1)}, amount: {renderAmount(args.amount)}]\n    </span>\n  );\n}\n\nconst renderCollect = (args) => {\n  return (\n    <span>\n      <strong>Collect</strong>\n      [amount0: {renderAmount(args.amount0)}, amount1: {renderAmount(args.amount1)}]\n    </span>\n  );\n}\n\nconst renderMint = (args) => {\n  return (\n    <span>\n      <strong>Mint</strong>\n      [range: [{args.tickLower}-{args.tickUpper}], amounts: [{renderAmount(args.amount0)}, {renderAmount(args.amount1)}]]\n    </span>\n  );\n}\n\nconst renderSwap = (args) => {\n  return (\n    <span>\n      <strong>Swap</strong>\n      [amount0: {renderAmount(args.amount0)}, amount1: {renderAmount(args.amount1)}]\n    </span>\n  );\n}\n\nconst renderEvent = (event, i) => {\n  let content;\n\n  switch (event.event) {\n    case 'Burn':\n      content = renderBurn(event.args);\n      break;\n\n    case 'Collect':\n      content = renderCollect(event.args);\n      break;\n\n    case 'Mint':\n      content = renderMint(event.args);\n      break;\n\n    case 'Swap':\n      content = renderSwap(event.args);\n      break;\n\n    default:\n      return;\n  }\n\n  return (\n    <tr key={i}>\n      <td className=\"pr-2\">{event.pairID}</td>\n      <td>{content}</td>\n    </tr>\n  )\n}\n\nconst isSupportedEvent = (event) => {\n  return event.event === \"Mint\" || event.event === 'Swap' || event.event === 'Burn' || event.event === 'Collect';\n}\n\nconst cleanEvents = (events) => {\n  const eventsMap = events.reduce((acc, event) => {\n    acc[`${event.address}_${event.transactionHash}`] = event;\n    return acc;\n  }, {});\n\n  return Object.keys(eventsMap)\n    .map(k => eventsMap[k])\n    .sort((a, b) => b.blockNumber - a.blockNumber || b.logIndex - a.logIndex);\n}\n\nconst eventsReducer = (state, action) => {\n  switch (action.type) {\n    case 'add':\n      return cleanEvents(state.concat(action.value));\n\n    default:\n      return;\n  }\n}\n\n\nconst EventsList = ({ events }) => {\n  return (\n    <table className=\"py-6 mb-2\">\n      <tbody>\n        {events.filter(isSupportedEvent).map(renderEvent)}\n      </tbody>\n    </table>\n  )\n}\n\nconst pairID = (pair) => `${pair.token0.symbol}/${pair.token1.symbol}`;\nconst addPairIDToEvents = (events, pair) => events\n  .filter(ev => ev)\n  .map(ev => { ev.pairID = pairID(pair); return ev });\n\nconst EventsFeed = ({ pairs }) => {\n  const metamaskContext = useContext(MetaMaskContext);\n  const [events, setEvents] = useReducer(eventsReducer, []);\n\n  useEffect(() => {\n    if (metamaskContext.status !== 'connected') {\n      return;\n    }\n\n    const pairContracts = pairs.map((pair) => {\n      const contract = new ethers.Contract(\n        pair.address,\n        PoolABI,\n        new ethers.providers.Web3Provider(window.ethereum)\n      );\n\n      subscribeToEvents(\n        contract,\n        event => setEvents({\n          type: 'add',\n          value: addPairIDToEvents([event], pair)\n        })\n      );\n      getEvents(contract)\n        .then(events => setEvents({\n          type: 'add',\n          value: addPairIDToEvents(events, pair)\n        }));\n\n      return contract;\n    });\n\n    return () => {\n      pairContracts.forEach((pair) => pair.removeAllListeners());\n    };\n  }, [metamaskContext.status, setEvents, pairs]);\n\n  return (<EventsList events={events} />);\n}\n\nexport default EventsFeed;"],"mappings":"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"},"metadata":{},"sourceType":"module"}