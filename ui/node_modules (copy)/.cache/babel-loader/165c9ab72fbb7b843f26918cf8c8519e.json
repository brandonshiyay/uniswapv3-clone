{"ast":null,"code":"import _slicedToArray from \"/home/brandon/security/learning/defi/uniswapv3-src/uniswapv3-code/ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"/home/brandon/security/learning/defi/uniswapv3-src/uniswapv3-code/ui/src/components/RemoveLiquidityForm.js\";\nimport './LiquidityForm.css';\nimport { ethers } from 'ethers';\nimport { useContext, useEffect, useState } from 'react';\nimport { feeToSpacing } from '../lib/constants';\nimport { MetaMaskContext } from '../contexts/MetaMask';\nimport { TickMath, encodeSqrtRatioX96, nearestUsableTick } from '@uniswap/v3-sdk';\nimport debounce from '../lib/debounce';\nimport config from \"../config.js\";\nimport computePoolAddress from '../lib/computePoolAddress';\nvar priceToSqrtP = function priceToSqrtP(price) {\n  return encodeSqrtRatioX96(price, 1);\n};\nvar priceToTick = function priceToTick(price) {\n  return TickMath.getTickAtSqrtRatio(priceToSqrtP(price));\n};\nvar BackButton = function BackButton(_ref) {\n  var onClick = _ref.onClick;\n  return /*#__PURE__*/React.createElement(\"button\", {\n    className: \"BackButton\",\n    onClick: onClick,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16,\n      columnNumber: 5\n    }\n  }, \"\\u2190 Back\");\n};\nvar PriceRange = function PriceRange(_ref2) {\n  var lowerPrice = _ref2.lowerPrice,\n    upperPrice = _ref2.upperPrice,\n    setLowerPrice = _ref2.setLowerPrice,\n    setUpperPrice = _ref2.setUpperPrice,\n    disabled = _ref2.disabled;\n  return /*#__PURE__*/React.createElement(\"fieldset\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"upperPrice\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 7\n    }\n  }, \"Price range\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"PriceRangeInputs\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"lowerPrice\",\n    placeholder: \"0.0\",\n    readOnly: disabled,\n    value: lowerPrice,\n    onChange: function onChange(ev) {\n      return setLowerPrice(ev.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 9\n    }\n  }, \"\\xA0\\u2013\\xA0\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"upperPrice\",\n    placeholder: \"0.0\",\n    readOnly: disabled,\n    value: upperPrice,\n    onChange: function onChange(ev) {\n      return setUpperPrice(ev.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 9\n    }\n  })));\n};\nvar RemoveLiquidityForm = function RemoveLiquidityForm(_ref3) {\n  var toggle = _ref3.toggle,\n    token0Info = _ref3.token0Info,\n    token1Info = _ref3.token1Info,\n    fee = _ref3.fee;\n  var metamaskContext = useContext(MetaMaskContext);\n  var enabled = metamaskContext.status === 'connected';\n  var account = metamaskContext.account;\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    token0 = _useState2[0],\n    setToken0 = _useState2[1];\n  var _useState3 = useState(),\n    _useState4 = _slicedToArray(_useState3, 2),\n    token1 = _useState4[0],\n    setToken1 = _useState4[1];\n  var _useState5 = useState(),\n    _useState6 = _slicedToArray(_useState5, 2),\n    manager = _useState6[0],\n    setManager = _useState6[1];\n  var _useState7 = useState(),\n    _useState8 = _slicedToArray(_useState7, 2),\n    pool = _useState8[0],\n    setPool = _useState8[1];\n  var _useState9 = useState(\"0\"),\n    _useState10 = _slicedToArray(_useState9, 2),\n    lowerPrice = _useState10[0],\n    setLowerPrice = _useState10[1];\n  var _useState11 = useState(\"0\"),\n    _useState12 = _slicedToArray(_useState11, 2),\n    upperPrice = _useState12[0],\n    setUpperPrice = _useState12[1];\n  var _useState13 = useState(\"0\"),\n    _useState14 = _slicedToArray(_useState13, 2),\n    availableAmount = _useState14[0],\n    setAvailableAmount = _useState14[1];\n  var _useState15 = useState(\"0\"),\n    _useState16 = _slicedToArray(_useState15, 2),\n    amount = _useState16[0],\n    setAmount = _useState16[1];\n  var _useState17 = useState(false),\n    _useState18 = _slicedToArray(_useState17, 2),\n    loading = _useState18[0],\n    setLoading = _useState18[1];\n  useEffect(function () {\n    setToken0(new ethers.Contract(token0Info.address, config.ABIs.ERC20, new ethers.providers.Web3Provider(window.ethereum).getSigner()));\n    setToken1(new ethers.Contract(token1Info.address, config.ABIs.ERC20, new ethers.providers.Web3Provider(window.ethereum).getSigner()));\n    setManager(new ethers.Contract(config.managerAddress, config.ABIs.Manager, new ethers.providers.Web3Provider(window.ethereum).getSigner()));\n    setPool(new ethers.Contract(computePoolAddress(config.factoryAddress, token0Info.address, token1Info.address, fee), config.ABIs.Pool, new ethers.providers.Web3Provider(window.ethereum).getSigner()));\n  }, [token0Info, token1Info, fee]);\n  var removeLiquidity = function removeLiquidity(e) {\n    e.preventDefault();\n    if (!token0 || !token1) {\n      return;\n    }\n    setLoading(true);\n    var lowerTick = nearestUsableTick(priceToTick(lowerPrice), feeToSpacing[fee]);\n    var upperTick = nearestUsableTick(priceToTick(upperPrice), feeToSpacing[fee]);\n    pool.burn(lowerTick, upperTick, amount).then(function (tx) {\n      return tx.wait();\n    }).then(function (receipt) {\n      if (!receipt.events[0] || receipt.events[0].event !== \"Burn\") {\n        throw Error(\"Missing Burn event after burning!\");\n      }\n      var amount0Burned = receipt.events[0].args.amount0;\n      var amount1Burned = receipt.events[0].args.amount1;\n      return pool.collect(account, lowerTick, upperTick, amount0Burned, amount1Burned);\n    }).then(function (tx) {\n      return tx.wait();\n    }).then(function () {\n      return toggle();\n    }).catch(function (err) {\n      return console.error(err);\n    });\n  };\n\n  /**\n   * Fetches available liquidity from a position.\n   */\n  var getAvailableLiquidity = debounce(function (amount, isLower) {\n    var lowerTick = priceToTick(isLower ? amount : lowerPrice);\n    var upperTick = priceToTick(isLower ? upperPrice : amount);\n    var params = {\n      tokenA: token0.address,\n      tokenB: token1.address,\n      fee: fee,\n      owner: account,\n      lowerTick: nearestUsableTick(lowerTick, feeToSpacing[fee]),\n      upperTick: nearestUsableTick(upperTick, feeToSpacing[fee])\n    };\n    manager.getPosition(params).then(function (position) {\n      return setAvailableAmount(position.liquidity.toString());\n    }).catch(function (err) {\n      return console.error(err);\n    });\n  }, 500);\n  var setPriceFn = function setPriceFn(_setPriceFn, isLower) {\n    return function (amount) {\n      _setPriceFn(amount);\n      getAvailableLiquidity(amount, isLower);\n    };\n  };\n  return /*#__PURE__*/React.createElement(\"section\", {\n    className: \"LiquidityWrapper\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"LiquidityForm\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(BackButton, {\n    onClick: toggle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(PriceRange, {\n    disabled: !enabled || loading,\n    lowerPrice: lowerPrice,\n    upperPrice: upperPrice,\n    setLowerPrice: setPriceFn(setLowerPrice, true),\n    setUpperPrice: setPriceFn(setUpperPrice, false),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"fieldset\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 11\n    }\n  }, \"Available liquidity\"), /*#__PURE__*/React.createElement(\"label\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 11\n    }\n  }, availableAmount)), /*#__PURE__*/React.createElement(\"fieldset\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 11\n    }\n  }, \"Amount to remove\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    value: amount,\n    onChange: function onChange(ev) {\n      return setAmount(ev.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"removeLiquidity\",\n    disabled: !enabled || loading,\n    onClick: removeLiquidity,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 9\n    }\n  }, \"Remove liquidity\")));\n};\nexport default RemoveLiquidityForm;","map":{"version":3,"names":["ethers","useContext","useEffect","useState","feeToSpacing","MetaMaskContext","TickMath","encodeSqrtRatioX96","nearestUsableTick","debounce","config","computePoolAddress","priceToSqrtP","price","priceToTick","getTickAtSqrtRatio","BackButton","_ref","onClick","React","createElement","className","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","PriceRange","_ref2","lowerPrice","upperPrice","setLowerPrice","setUpperPrice","disabled","htmlFor","type","id","placeholder","readOnly","value","onChange","ev","target","RemoveLiquidityForm","_ref3","toggle","token0Info","token1Info","fee","metamaskContext","enabled","status","account","_useState","_useState2","_slicedToArray","token0","setToken0","_useState3","_useState4","token1","setToken1","_useState5","_useState6","manager","setManager","_useState7","_useState8","pool","setPool","_useState9","_useState10","_useState11","_useState12","_useState13","_useState14","availableAmount","setAvailableAmount","_useState15","_useState16","amount","setAmount","_useState17","_useState18","loading","setLoading","Contract","address","ABIs","ERC20","providers","Web3Provider","window","ethereum","getSigner","managerAddress","Manager","factoryAddress","Pool","removeLiquidity","e","preventDefault","lowerTick","upperTick","burn","then","tx","wait","receipt","events","event","Error","amount0Burned","args","amount0","amount1Burned","amount1","collect","catch","err","console","error","getAvailableLiquidity","isLower","params","tokenA","tokenB","owner","getPosition","position","liquidity","toString","setPriceFn"],"sources":["/home/brandon/security/learning/defi/uniswapv3-src/uniswapv3-code/ui/src/components/RemoveLiquidityForm.js"],"sourcesContent":["import './LiquidityForm.css';\nimport { ethers } from 'ethers';\nimport { useContext, useEffect, useState } from 'react';\nimport { feeToSpacing } from '../lib/constants';\nimport { MetaMaskContext } from '../contexts/MetaMask';\nimport { TickMath, encodeSqrtRatioX96, nearestUsableTick } from '@uniswap/v3-sdk';\nimport debounce from '../lib/debounce';\nimport config from \"../config.js\";\nimport computePoolAddress from '../lib/computePoolAddress';\n\nconst priceToSqrtP = (price) => encodeSqrtRatioX96(price, 1);\nconst priceToTick = (price) => TickMath.getTickAtSqrtRatio(priceToSqrtP(price));\n\nconst BackButton = ({ onClick }) => {\n  return (\n    <button className=\"BackButton\" onClick={onClick}>← Back</button>\n  );\n}\n\nconst PriceRange = ({ lowerPrice, upperPrice, setLowerPrice, setUpperPrice, disabled }) => {\n  return (\n    <fieldset>\n      <label htmlFor=\"upperPrice\">Price range</label>\n      <div className=\"PriceRangeInputs\">\n        <input\n          type=\"text\"\n          id=\"lowerPrice\"\n          placeholder=\"0.0\"\n          readOnly={disabled}\n          value={lowerPrice}\n          onChange={(ev) => setLowerPrice(ev.target.value)}\n        />\n        <span>&nbsp;–&nbsp;</span>\n        <input\n          type=\"text\"\n          id=\"upperPrice\"\n          placeholder=\"0.0\"\n          readOnly={disabled}\n          value={upperPrice}\n          onChange={(ev) => setUpperPrice(ev.target.value)}\n        />\n      </div>\n    </fieldset>\n  );\n}\n\nconst RemoveLiquidityForm = ({ toggle, token0Info, token1Info, fee }) => {\n  const metamaskContext = useContext(MetaMaskContext);\n  const enabled = metamaskContext.status === 'connected';\n  const account = metamaskContext.account;\n\n  const [token0, setToken0] = useState();\n  const [token1, setToken1] = useState();\n  const [manager, setManager] = useState();\n  const [pool, setPool] = useState();\n  const [lowerPrice, setLowerPrice] = useState(\"0\");\n  const [upperPrice, setUpperPrice] = useState(\"0\");\n  const [availableAmount, setAvailableAmount] = useState(\"0\");\n  const [amount, setAmount] = useState(\"0\");\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    setToken0(new ethers.Contract(\n      token0Info.address,\n      config.ABIs.ERC20,\n      new ethers.providers.Web3Provider(window.ethereum).getSigner()\n    ));\n    setToken1(new ethers.Contract(\n      token1Info.address,\n      config.ABIs.ERC20,\n      new ethers.providers.Web3Provider(window.ethereum).getSigner()\n    ));\n    setManager(new ethers.Contract(\n      config.managerAddress,\n      config.ABIs.Manager,\n      new ethers.providers.Web3Provider(window.ethereum).getSigner()\n    ));\n    setPool(new ethers.Contract(\n      computePoolAddress(config.factoryAddress, token0Info.address, token1Info.address, fee),\n      config.ABIs.Pool,\n      new ethers.providers.Web3Provider(window.ethereum).getSigner()\n    ));\n  }, [token0Info, token1Info, fee]);\n\n  const removeLiquidity = (e) => {\n    e.preventDefault();\n\n    if (!token0 || !token1) {\n      return;\n    }\n\n    setLoading(true);\n\n    const lowerTick = nearestUsableTick(priceToTick(lowerPrice), feeToSpacing[fee]);\n    const upperTick = nearestUsableTick(priceToTick(upperPrice), feeToSpacing[fee]);\n\n    pool.burn(lowerTick, upperTick, amount)\n      .then(tx => tx.wait())\n      .then(receipt => {\n        if (!receipt.events[0] || receipt.events[0].event !== \"Burn\") {\n          throw Error(\"Missing Burn event after burning!\");\n        }\n\n        const amount0Burned = receipt.events[0].args.amount0;\n        const amount1Burned = receipt.events[0].args.amount1;\n\n        return pool.collect(account, lowerTick, upperTick, amount0Burned, amount1Burned)\n      })\n      .then(tx => tx.wait())\n      .then(() => toggle())\n      .catch(err => console.error(err));\n  }\n\n  /**\n   * Fetches available liquidity from a position.\n   */\n  const getAvailableLiquidity = debounce((amount, isLower) => {\n    const lowerTick = priceToTick(isLower ? amount : lowerPrice);\n    const upperTick = priceToTick(isLower ? upperPrice : amount);\n\n    const params = {\n      tokenA: token0.address,\n      tokenB: token1.address,\n      fee: fee,\n      owner: account,\n      lowerTick: nearestUsableTick(lowerTick, feeToSpacing[fee]),\n      upperTick: nearestUsableTick(upperTick, feeToSpacing[fee]),\n    }\n\n    manager.getPosition(params)\n      .then(position => setAvailableAmount(position.liquidity.toString()))\n      .catch(err => console.error(err));\n  }, 500);\n\n  const setPriceFn = (setPriceFn, isLower) => {\n    return (amount) => {\n      setPriceFn(amount);\n      getAvailableLiquidity(amount, isLower);\n    }\n  };\n\n  return (\n    <section className=\"LiquidityWrapper\">\n      <form className=\"LiquidityForm\">\n        <BackButton\n          onClick={toggle} />\n        <PriceRange\n          disabled={!enabled || loading}\n          lowerPrice={lowerPrice}\n          upperPrice={upperPrice}\n          setLowerPrice={setPriceFn(setLowerPrice, true)}\n          setUpperPrice={setPriceFn(setUpperPrice, false)} />\n        <fieldset>\n          <label>Available liquidity</label>\n          <label>{availableAmount}</label>\n        </fieldset>\n        <fieldset>\n          <label>Amount to remove</label>\n          <input type=\"number\"\n            value={amount}\n            onChange={ev => setAmount(ev.target.value)}\n          />\n        </fieldset>\n        <button className=\"removeLiquidity\" disabled={!enabled || loading} onClick={removeLiquidity}>Remove liquidity</button>\n      </form>\n    </section>\n  );\n}\n\nexport default RemoveLiquidityForm;"],"mappings":";;;AAAA,OAAO,qBAAqB;AAC5B,SAASA,MAAM,QAAQ,QAAQ;AAC/B,SAASC,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AACvD,SAASC,YAAY,QAAQ,kBAAkB;AAC/C,SAASC,eAAe,QAAQ,sBAAsB;AACtD,SAASC,QAAQ,EAAEC,kBAAkB,EAAEC,iBAAiB,QAAQ,iBAAiB;AACjF,OAAOC,QAAQ,MAAM,iBAAiB;AACtC,OAAOC,MAAM,MAAM,cAAc;AACjC,OAAOC,kBAAkB,MAAM,2BAA2B;AAE1D,IAAMC,YAAY,GAAG,SAAfA,YAAYA,CAAIC,KAAK;EAAA,OAAKN,kBAAkB,CAACM,KAAK,EAAE,CAAC,CAAC;AAAA;AAC5D,IAAMC,WAAW,GAAG,SAAdA,WAAWA,CAAID,KAAK;EAAA,OAAKP,QAAQ,CAACS,kBAAkB,CAACH,YAAY,CAACC,KAAK,CAAC,CAAC;AAAA;AAE/E,IAAMG,UAAU,GAAG,SAAbA,UAAUA,CAAAC,IAAA,EAAoB;EAAA,IAAdC,OAAO,GAAAD,IAAA,CAAPC,OAAO;EAC3B,oBACEC,KAAA,CAAAC,aAAA;IAAQC,SAAS,EAAC,YAAY;IAACH,OAAO,EAAEA,OAAQ;IAAAI,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,aAAM,CAAS;AAEpE,CAAC;AAED,IAAMC,UAAU,GAAG,SAAbA,UAAUA,CAAAC,KAAA,EAA2E;EAAA,IAArEC,UAAU,GAAAD,KAAA,CAAVC,UAAU;IAAEC,UAAU,GAAAF,KAAA,CAAVE,UAAU;IAAEC,aAAa,GAAAH,KAAA,CAAbG,aAAa;IAAEC,aAAa,GAAAJ,KAAA,CAAbI,aAAa;IAAEC,QAAQ,GAAAL,KAAA,CAARK,QAAQ;EAClF,oBACEhB,KAAA,CAAAC,aAAA;IAAAE,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACET,KAAA,CAAAC,aAAA;IAAOgB,OAAO,EAAC,YAAY;IAAAd,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,aAAW,CAAQ,eAC/CT,KAAA,CAAAC,aAAA;IAAKC,SAAS,EAAC,kBAAkB;IAAAC,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC/BT,KAAA,CAAAC,aAAA;IACEiB,IAAI,EAAC,MAAM;IACXC,EAAE,EAAC,YAAY;IACfC,WAAW,EAAC,KAAK;IACjBC,QAAQ,EAAEL,QAAS;IACnBM,KAAK,EAAEV,UAAW;IAClBW,QAAQ,EAAE,SAAAA,SAACC,EAAE;MAAA,OAAKV,aAAa,CAACU,EAAE,CAACC,MAAM,CAACH,KAAK,CAAC;IAAA,CAAC;IAAAnB,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,EACjD,eACFT,KAAA,CAAAC,aAAA;IAAAE,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAM,gBAAa,CAAO,eAC1BT,KAAA,CAAAC,aAAA;IACEiB,IAAI,EAAC,MAAM;IACXC,EAAE,EAAC,YAAY;IACfC,WAAW,EAAC,KAAK;IACjBC,QAAQ,EAAEL,QAAS;IACnBM,KAAK,EAAET,UAAW;IAClBU,QAAQ,EAAE,SAAAA,SAACC,EAAE;MAAA,OAAKT,aAAa,CAACS,EAAE,CAACC,MAAM,CAACH,KAAK,CAAC;IAAA,CAAC;IAAAnB,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,EACjD,CACE,CACG;AAEf,CAAC;AAED,IAAMiB,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAAC,KAAA,EAAgD;EAAA,IAA1CC,MAAM,GAAAD,KAAA,CAANC,MAAM;IAAEC,UAAU,GAAAF,KAAA,CAAVE,UAAU;IAAEC,UAAU,GAAAH,KAAA,CAAVG,UAAU;IAAEC,GAAG,GAAAJ,KAAA,CAAHI,GAAG;EAChE,IAAMC,eAAe,GAAGlD,UAAU,CAACI,eAAe,CAAC;EACnD,IAAM+C,OAAO,GAAGD,eAAe,CAACE,MAAM,KAAK,WAAW;EACtD,IAAMC,OAAO,GAAGH,eAAe,CAACG,OAAO;EAAC,IAAAC,SAAA,GAEZpD,QAAQ,EAAE;IAAAqD,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAA/BG,MAAM,GAAAF,UAAA;IAAEG,SAAS,GAAAH,UAAA;EAAA,IAAAI,UAAA,GACIzD,QAAQ,EAAE;IAAA0D,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAA/BE,MAAM,GAAAD,UAAA;IAAEE,SAAS,GAAAF,UAAA;EAAA,IAAAG,UAAA,GACM7D,QAAQ,EAAE;IAAA8D,UAAA,GAAAR,cAAA,CAAAO,UAAA;IAAjCE,OAAO,GAAAD,UAAA;IAAEE,UAAU,GAAAF,UAAA;EAAA,IAAAG,UAAA,GACFjE,QAAQ,EAAE;IAAAkE,UAAA,GAAAZ,cAAA,CAAAW,UAAA;IAA3BE,IAAI,GAAAD,UAAA;IAAEE,OAAO,GAAAF,UAAA;EAAA,IAAAG,UAAA,GACgBrE,QAAQ,CAAC,GAAG,CAAC;IAAAsE,WAAA,GAAAhB,cAAA,CAAAe,UAAA;IAA1CzC,UAAU,GAAA0C,WAAA;IAAExC,aAAa,GAAAwC,WAAA;EAAA,IAAAC,WAAA,GACIvE,QAAQ,CAAC,GAAG,CAAC;IAAAwE,WAAA,GAAAlB,cAAA,CAAAiB,WAAA;IAA1C1C,UAAU,GAAA2C,WAAA;IAAEzC,aAAa,GAAAyC,WAAA;EAAA,IAAAC,WAAA,GACczE,QAAQ,CAAC,GAAG,CAAC;IAAA0E,WAAA,GAAApB,cAAA,CAAAmB,WAAA;IAApDE,eAAe,GAAAD,WAAA;IAAEE,kBAAkB,GAAAF,WAAA;EAAA,IAAAG,WAAA,GACd7E,QAAQ,CAAC,GAAG,CAAC;IAAA8E,WAAA,GAAAxB,cAAA,CAAAuB,WAAA;IAAlCE,MAAM,GAAAD,WAAA;IAAEE,SAAS,GAAAF,WAAA;EAAA,IAAAG,WAAA,GACMjF,QAAQ,CAAC,KAAK,CAAC;IAAAkF,WAAA,GAAA5B,cAAA,CAAA2B,WAAA;IAAtCE,OAAO,GAAAD,WAAA;IAAEE,UAAU,GAAAF,WAAA;EAE1BnF,SAAS,CAAC,YAAM;IACdyD,SAAS,CAAC,IAAI3D,MAAM,CAACwF,QAAQ,CAC3BxC,UAAU,CAACyC,OAAO,EAClB/E,MAAM,CAACgF,IAAI,CAACC,KAAK,EACjB,IAAI3F,MAAM,CAAC4F,SAAS,CAACC,YAAY,CAACC,MAAM,CAACC,QAAQ,CAAC,CAACC,SAAS,EAAE,CAC/D,CAAC;IACFjC,SAAS,CAAC,IAAI/D,MAAM,CAACwF,QAAQ,CAC3BvC,UAAU,CAACwC,OAAO,EAClB/E,MAAM,CAACgF,IAAI,CAACC,KAAK,EACjB,IAAI3F,MAAM,CAAC4F,SAAS,CAACC,YAAY,CAACC,MAAM,CAACC,QAAQ,CAAC,CAACC,SAAS,EAAE,CAC/D,CAAC;IACF7B,UAAU,CAAC,IAAInE,MAAM,CAACwF,QAAQ,CAC5B9E,MAAM,CAACuF,cAAc,EACrBvF,MAAM,CAACgF,IAAI,CAACQ,OAAO,EACnB,IAAIlG,MAAM,CAAC4F,SAAS,CAACC,YAAY,CAACC,MAAM,CAACC,QAAQ,CAAC,CAACC,SAAS,EAAE,CAC/D,CAAC;IACFzB,OAAO,CAAC,IAAIvE,MAAM,CAACwF,QAAQ,CACzB7E,kBAAkB,CAACD,MAAM,CAACyF,cAAc,EAAEnD,UAAU,CAACyC,OAAO,EAAExC,UAAU,CAACwC,OAAO,EAAEvC,GAAG,CAAC,EACtFxC,MAAM,CAACgF,IAAI,CAACU,IAAI,EAChB,IAAIpG,MAAM,CAAC4F,SAAS,CAACC,YAAY,CAACC,MAAM,CAACC,QAAQ,CAAC,CAACC,SAAS,EAAE,CAC/D,CAAC;EACJ,CAAC,EAAE,CAAChD,UAAU,EAAEC,UAAU,EAAEC,GAAG,CAAC,CAAC;EAEjC,IAAMmD,eAAe,GAAG,SAAlBA,eAAeA,CAAIC,CAAC,EAAK;IAC7BA,CAAC,CAACC,cAAc,EAAE;IAElB,IAAI,CAAC7C,MAAM,IAAI,CAACI,MAAM,EAAE;MACtB;IACF;IAEAyB,UAAU,CAAC,IAAI,CAAC;IAEhB,IAAMiB,SAAS,GAAGhG,iBAAiB,CAACM,WAAW,CAACiB,UAAU,CAAC,EAAE3B,YAAY,CAAC8C,GAAG,CAAC,CAAC;IAC/E,IAAMuD,SAAS,GAAGjG,iBAAiB,CAACM,WAAW,CAACkB,UAAU,CAAC,EAAE5B,YAAY,CAAC8C,GAAG,CAAC,CAAC;IAE/EoB,IAAI,CAACoC,IAAI,CAACF,SAAS,EAAEC,SAAS,EAAEvB,MAAM,CAAC,CACpCyB,IAAI,CAAC,UAAAC,EAAE;MAAA,OAAIA,EAAE,CAACC,IAAI,EAAE;IAAA,EAAC,CACrBF,IAAI,CAAC,UAAAG,OAAO,EAAI;MACf,IAAI,CAACA,OAAO,CAACC,MAAM,CAAC,CAAC,CAAC,IAAID,OAAO,CAACC,MAAM,CAAC,CAAC,CAAC,CAACC,KAAK,KAAK,MAAM,EAAE;QAC5D,MAAMC,KAAK,CAAC,mCAAmC,CAAC;MAClD;MAEA,IAAMC,aAAa,GAAGJ,OAAO,CAACC,MAAM,CAAC,CAAC,CAAC,CAACI,IAAI,CAACC,OAAO;MACpD,IAAMC,aAAa,GAAGP,OAAO,CAACC,MAAM,CAAC,CAAC,CAAC,CAACI,IAAI,CAACG,OAAO;MAEpD,OAAOhD,IAAI,CAACiD,OAAO,CAACjE,OAAO,EAAEkD,SAAS,EAAEC,SAAS,EAAES,aAAa,EAAEG,aAAa,CAAC;IAClF,CAAC,CAAC,CACDV,IAAI,CAAC,UAAAC,EAAE;MAAA,OAAIA,EAAE,CAACC,IAAI,EAAE;IAAA,EAAC,CACrBF,IAAI,CAAC;MAAA,OAAM5D,MAAM,EAAE;IAAA,EAAC,CACpByE,KAAK,CAAC,UAAAC,GAAG;MAAA,OAAIC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;IAAA,EAAC;EACrC,CAAC;;EAED;AACF;AACA;EACE,IAAMG,qBAAqB,GAAGnH,QAAQ,CAAC,UAACyE,MAAM,EAAE2C,OAAO,EAAK;IAC1D,IAAMrB,SAAS,GAAG1F,WAAW,CAAC+G,OAAO,GAAG3C,MAAM,GAAGnD,UAAU,CAAC;IAC5D,IAAM0E,SAAS,GAAG3F,WAAW,CAAC+G,OAAO,GAAG7F,UAAU,GAAGkD,MAAM,CAAC;IAE5D,IAAM4C,MAAM,GAAG;MACbC,MAAM,EAAErE,MAAM,CAAC+B,OAAO;MACtBuC,MAAM,EAAElE,MAAM,CAAC2B,OAAO;MACtBvC,GAAG,EAAEA,GAAG;MACR+E,KAAK,EAAE3E,OAAO;MACdkD,SAAS,EAAEhG,iBAAiB,CAACgG,SAAS,EAAEpG,YAAY,CAAC8C,GAAG,CAAC,CAAC;MAC1DuD,SAAS,EAAEjG,iBAAiB,CAACiG,SAAS,EAAErG,YAAY,CAAC8C,GAAG,CAAC;IAC3D,CAAC;IAEDgB,OAAO,CAACgE,WAAW,CAACJ,MAAM,CAAC,CACxBnB,IAAI,CAAC,UAAAwB,QAAQ;MAAA,OAAIpD,kBAAkB,CAACoD,QAAQ,CAACC,SAAS,CAACC,QAAQ,EAAE,CAAC;IAAA,EAAC,CACnEb,KAAK,CAAC,UAAAC,GAAG;MAAA,OAAIC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;IAAA,EAAC;EACrC,CAAC,EAAE,GAAG,CAAC;EAEP,IAAMa,UAAU,GAAG,SAAAA,WAACA,WAAU,EAAET,OAAO,EAAK;IAC1C,OAAO,UAAC3C,MAAM,EAAK;MACjBoD,WAAU,CAACpD,MAAM,CAAC;MAClB0C,qBAAqB,CAAC1C,MAAM,EAAE2C,OAAO,CAAC;IACxC,CAAC;EACH,CAAC;EAED,oBACE1G,KAAA,CAAAC,aAAA;IAASC,SAAS,EAAC,kBAAkB;IAAAC,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACnCT,KAAA,CAAAC,aAAA;IAAMC,SAAS,EAAC,eAAe;IAAAC,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC7BT,KAAA,CAAAC,aAAA,CAACJ,UAAU;IACTE,OAAO,EAAE6B,MAAO;IAAAzB,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,EAAG,eACrBT,KAAA,CAAAC,aAAA,CAACS,UAAU;IACTM,QAAQ,EAAE,CAACiB,OAAO,IAAIkC,OAAQ;IAC9BvD,UAAU,EAAEA,UAAW;IACvBC,UAAU,EAAEA,UAAW;IACvBC,aAAa,EAAEqG,UAAU,CAACrG,aAAa,EAAE,IAAI,CAAE;IAC/CC,aAAa,EAAEoG,UAAU,CAACpG,aAAa,EAAE,KAAK,CAAE;IAAAZ,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,EAAG,eACrDT,KAAA,CAAAC,aAAA;IAAAE,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACET,KAAA,CAAAC,aAAA;IAAAE,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAO,qBAAmB,CAAQ,eAClCT,KAAA,CAAAC,aAAA;IAAAE,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAQkD,eAAe,CAAS,CACvB,eACX3D,KAAA,CAAAC,aAAA;IAAAE,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACET,KAAA,CAAAC,aAAA;IAAAE,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAO,kBAAgB,CAAQ,eAC/BT,KAAA,CAAAC,aAAA;IAAOiB,IAAI,EAAC,QAAQ;IAClBI,KAAK,EAAEyC,MAAO;IACdxC,QAAQ,EAAE,SAAAA,SAAAC,EAAE;MAAA,OAAIwC,SAAS,CAACxC,EAAE,CAACC,MAAM,CAACH,KAAK,CAAC;IAAA,CAAC;IAAAnB,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,EAC3C,CACO,eACXT,KAAA,CAAAC,aAAA;IAAQC,SAAS,EAAC,iBAAiB;IAACc,QAAQ,EAAE,CAACiB,OAAO,IAAIkC,OAAQ;IAACpE,OAAO,EAAEmF,eAAgB;IAAA/E,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,kBAAgB,CAAS,CACjH,CACC;AAEd,CAAC;AAED,eAAeiB,mBAAmB"},"metadata":{},"sourceType":"module"}